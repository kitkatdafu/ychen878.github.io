<!doctype html><html lang=en-us>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Python后台开发 | XIAOYIJ</title>
<link rel=canonical href=https://www.mrr1vfe.io/posts/django_note/>
<meta name=description content="This is my website">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Python后台开发">
<meta property="og:description" content="环境搭建与入门案例  环境搭建  1pip3 install django==2.2 2pip3 install pymysql 3pip3 install mysqlclient 4pip3 install pillow    主文件夹中的文件    settings.py  总配置文件  urls.py  总路由映射文件, 把请求过来的url地址进行分配，分配给不同的handler处理器，处理器处理得到不同的结果，并把结果返回给浏览器  wsgi.py  项目部署    项目搭建步骤   创建Django项目 创建app并在settings中配置 创建urls.py并在总路由中配置 定义首页视图 定义解析器 运行manage.py    创建app并在settings中配置  1django-admin startapp myapp   通过settings.py引入创建的app  1INSTALLED_APPS = [ 2 'django.contrib.admin', 3 'django.contrib.auth', 4 'django.contrib.contenttypes', 5 'django.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.mrr1vfe.io/posts/django_note/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-06-21T00:00:00+00:00">
<meta property="article:modified_time" content="2019-06-21T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Python后台开发">
<meta name=twitter:description content="环境搭建与入门案例  环境搭建  1pip3 install django==2.2 2pip3 install pymysql 3pip3 install mysqlclient 4pip3 install pillow    主文件夹中的文件    settings.py  总配置文件  urls.py  总路由映射文件, 把请求过来的url地址进行分配，分配给不同的handler处理器，处理器处理得到不同的结果，并把结果返回给浏览器  wsgi.py  项目部署    项目搭建步骤   创建Django项目 创建app并在settings中配置 创建urls.py并在总路由中配置 定义首页视图 定义解析器 运行manage.py    创建app并在settings中配置  1django-admin startapp myapp   通过settings.py引入创建的app  1INSTALLED_APPS = [ 2 'django.contrib.admin', 3 'django.contrib.auth', 4 'django.contrib.contenttypes', 5 'django.">
<link rel=stylesheet href=https://www.mrr1vfe.io/css/styles.4c2b9aa1d874d6766f554b2d404e8fd62ab4761f51ee9b3f358d12e81e7fa43a1b4378db995bc1926bbe5ed98c060be5e7bd4f2470504cf94f22b4b3a74e62b6.css integrity="sha512-TCuaodh01nZvVUstQE6P1iq0dh9R7ps/NY0S6B5/pDobQ3jbmVvBkmu+XtmMBgvl571PJHBQTPlPIrSzp05itg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=https://www.mrr1vfe.io/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
<li><a href=https://archive.casouri.cat>BHL0388</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=https://www.mrr1vfe.io/posts/memory-and-cache-review/ aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&text=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&title=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&is_video=false&description=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91&body=Check out this article: https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&title=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&title=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&name=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91&description=%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba%e4%b8%8e%e5%85%a5%e9%97%a8%e6%a1%88%e4%be%8b%20%20%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba%20%201pip3%20install%20django%3d%3d2.2%202pip3%20install%20pymysql%203pip3%20install%20mysqlclient%204pip3%20install%20pillow%20%20%20%20%e4%b8%bb%e6%96%87%e4%bb%b6%e5%a4%b9%e4%b8%ad%e7%9a%84%e6%96%87%e4%bb%b6%20%20%20%20settings.py%20%20%e6%80%bb%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%20%20urls.py%20%20%e6%80%bb%e8%b7%af%e7%94%b1%e6%98%a0%e5%b0%84%e6%96%87%e4%bb%b6%2c%20%e6%8a%8a%e8%af%b7%e6%b1%82%e8%bf%87%e6%9d%a5%e7%9a%84url%e5%9c%b0%e5%9d%80%e8%bf%9b%e8%a1%8c%e5%88%86%e9%85%8d%ef%bc%8c%e5%88%86%e9%85%8d%e7%bb%99%e4%b8%8d%e5%90%8c%e7%9a%84handler%e5%a4%84%e7%90%86%e5%99%a8%ef%bc%8c%e5%a4%84%e7%90%86%e5%99%a8%e5%a4%84%e7%90%86%e5%be%97%e5%88%b0%e4%b8%8d%e5%90%8c%e7%9a%84%e7%bb%93%e6%9e%9c%ef%bc%8c%e5%b9%b6%e6%8a%8a%e7%bb%93%e6%9e%9c%e8%bf%94%e5%9b%9e%e7%bb%99%e6%b5%8f%e8%a7%88%e5%99%a8%20%20wsgi.py%20%20%e9%a1%b9%e7%9b%ae%e9%83%a8%e7%bd%b2%20%20%20%20%e9%a1%b9%e7%9b%ae%e6%90%ad%e5%bb%ba%e6%ad%a5%e9%aa%a4%20%20%20%e5%88%9b%e5%bb%baDjango%e9%a1%b9%e7%9b%ae%20%e5%88%9b%e5%bb%baapp%e5%b9%b6%e5%9c%a8settings%e4%b8%ad%e9%85%8d%e7%bd%ae%20%e5%88%9b%e5%bb%baurls.py%e5%b9%b6%e5%9c%a8%e6%80%bb%e8%b7%af%e7%94%b1%e4%b8%ad%e9%85%8d%e7%bd%ae%20%e5%ae%9a%e4%b9%89%e9%a6%96%e9%a1%b5%e8%a7%86%e5%9b%be%20%e5%ae%9a%e4%b9%89%e8%a7%a3%e6%9e%90%e5%99%a8%20%e8%bf%90%e8%a1%8cmanage.py%20%20%20%20%e5%88%9b%e5%bb%baapp%e5%b9%b6%e5%9c%a8settings%e4%b8%ad%e9%85%8d%e7%bd%ae%20%201django-admin%20startapp%20myapp%20%20%20%e9%80%9a%e8%bf%87settings.py%e5%bc%95%e5%85%a5%e5%88%9b%e5%bb%ba%e7%9a%84app%20%201INSTALLED_APPS%20%3d%20%5b%202%20%26%2339%3bdjango.contrib.admin%26%2339%3b%2c%203%20%26%2339%3bdjango.contrib.auth%26%2339%3b%2c%204%20%26%2339%3bdjango.contrib.contenttypes%26%2339%3b%2c%205%20%26%2339%3bdjango." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&t=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#headline-1>环境搭建与入门案例</a>
<ul>
<li><a href=#headline-2>环境搭建</a>
</li>
<li><a href=#headline-3>主文件夹中的文件</a>
</li>
<li><a href=#headline-4>项目搭建步骤</a>
</li>
<li><a href=#headline-5>创建app并在settings中配置</a>
</li>
<li><a href=#headline-6>创建urls.py并在总路由中配置</a>
</li>
<li><a href=#headline-7>定义首页视图</a>
</li>
<li><a href=#headline-8>定义解析器</a>
</li>
<li><a href=#headline-9>运行manage.py</a>
</li>
</ul>
</li>
<li><a href=#headline-10>基本路由映射</a>
</li>
<li><a href=#headline-11>命名空间</a>
</li>
<li><a href=#headline-12>正则参数传递与接收</a>
</li>
<li><a href=#headline-13>基础正则表达式</a>
</li>
<li><a href=#headline-14>反向解析处理器</a>
</li>
<li><a href=#headline-15>request和response</a>
<ul>
<li><a href=#headline-16>request对象HttpRequest</a>
</li>
<li><a href=#headline-17>response对象HttpResponse</a>
</li>
<li><a href=#headline-18>JsonResponse对象</a>
</li>
<li><a href=#headline-19>重定向</a>
</li>
</ul>
</li>
<li><a href=#headline-20>前端</a>
<ul>
<li><a href=#headline-21>标签语言 </a>
</li>
<li><a href=#headline-22>元素与属性</a>
</li>
<li><a href=#headline-23>其他资源</a>
</li>
</ul>
</li>
<li><a href=#headline-24>模板原理</a>
<ul>
<li><a href=#headline-25>模板调用</a>
</li>
<li><a href=#headline-26>模板传参</a>
</li>
<li><a href=#headline-27>模板层基础语法</a>
<ul>
<li><a href=#headline-28>参数输出</a>
</li>
<li><a href=#headline-29>循环语句</a>
</li>
<li><a href=#headline-30>判断语句</a>
</li>
<li><a href=#headline-31>视图函数地址</a>
</li>
</ul>
</li>
<li><a href=#headline-32>模板过滤器</a>
<ul>
<li><a href=#headline-33>常用过滤器</a>
</li>
</ul>
</li>
<li><a href=#headline-34>模板复用和block提取</a>
</li>
</ul>
</li>
<li><a href=#headline-35>MySQL数据库基础</a>
<ul>
<li><a href=#headline-36>数据库的创建与删除</a>
</li>
<li><a href=#headline-37>使用与查看数据库</a>
</li>
<li><a href=#headline-38>数据库编码</a>
</li>
<li><a href=#headline-39>常用数据类型</a>
</li>
<li><a href=#headline-40>创建表结构</a>
</li>
<li><a href=#headline-41>常用字段约束</a>
</li>
<li><a href=#headline-42>查询操作</a>
</li>
<li><a href=#headline-43>增删改查</a>
</li>
<li><a href=#headline-44>多表操作</a>
</li>
<li><a href=#headline-45>ORM</a>
</li>
<li><a href=#headline-46>模型类的查询方法</a>
<ul>
<li><a href=#headline-47>比较查询</a>
</li>
<li><a href=#headline-48>模糊查询</a>
</li>
<li><a href=#headline-49>范围查询</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href=#headline-50>Redis</a>
<ul>
<li><a href=#headline-51>安装包</a>
</li>
<li><a href=#headline-52>settings配置</a>
</li>
</ul>
</li>
<li><a href=#headline-53>CSRF跨域</a>
<ul>
<li><a href=#headline-54>添加CSRF_TOKEN</a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
Python后台开发
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2019-06-21 00:00:00 +0000 UTC" itemprop=datePublished>2019-06-21</time>
</div>
<div class=article-read-time>
<i class="far fa-clock"></i>
20 minute read
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/web rel=tag>Web</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<div id=outline-container-headline-1 class=outline-2>
<h2 id=headline-1>
环境搭建与入门案例
</h2>
<div id=outline-text-headline-1 class=outline-text-2>
<div id=outline-container-headline-2 class=outline-3>
<h3 id=headline-2>
环境搭建
</h3>
<div id=outline-text-headline-2 class=outline-text-3>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>pip3 install django==2.2
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>pip3 install pymysql
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>pip3 install mysqlclient
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>pip3 install pillow</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-3 class=outline-3>
<h3 id=headline-3>
主文件夹中的文件
</h3>
<div id=outline-text-headline-3 class=outline-text-3>
<dl>
<dt>
settings.py
</dt>
<dd>总配置文件</dd>
<dt>
urls.py
</dt>
<dd>总路由映射文件, 把请求过来的url地址进行分配，分配给不同的handler处理器，处理器处理得到不同的结果，并把结果返回给浏览器</dd>
<dt>
wsgi.py
</dt>
<dd>项目部署</dd>
</dl>
</div>
</div>
<div id=outline-container-headline-4 class=outline-3>
<h3 id=headline-4>
项目搭建步骤
</h3>
<div id=outline-text-headline-4 class=outline-text-3>
<ol>
<li>创建Django项目</li>
<li>创建app并在settings中配置</li>
<li>创建urls.py并在总路由中配置</li>
<li>定义首页视图</li>
<li>定义解析器</li>
<li>运行manage.py</li>
</ol>
</div>
</div>
<div id=outline-container-headline-5 class=outline-3>
<h3 id=headline-5>
创建app并在settings中配置
</h3>
<div id=outline-text-headline-5 class=outline-text-3>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>django-admin startapp myapp</code></pre></div>
</div>
<ul>
<li>通过settings.py引入创建的app</li>
</ul>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>INSTALLED_APPS <span style=color:#ff79c6>=</span> [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span> <span style=color:#f1fa8c>&#39;django.contrib.admin&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span> <span style=color:#f1fa8c>&#39;django.contrib.auth&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span> <span style=color:#f1fa8c>&#39;django.contrib.contenttypes&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span> <span style=color:#f1fa8c>&#39;django.contrib.sessions&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span> <span style=color:#f1fa8c>&#39;django.contrib.messages&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span> <span style=color:#f1fa8c>&#39;django.contrib.staticfiles&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span> <span style=color:#f1fa8c>&#39;myapp&#39;</span>, <span style=color:#6272a4># 新创建的app名称</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span>]</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-6 class=outline-3>
<h3 id=headline-6>
创建urls.py并在总路由中配置
</h3>
<div id=outline-text-headline-6 class=outline-text-3>
<ul>
<li>在myapp文件夹中创建一个python文件, urls.py </li>
<li>在总路由urls.py中添加</li>
</ul>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>from</span> django.urls <span style=color:#ff79c6>import</span> path, include
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>urlpatterns <span style=color:#ff79c6>=</span> [ 
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span> path(<span style=color:#f1fa8c>&#39;admin/&#39;</span>, admin<span style=color:#ff79c6>.</span>site<span style=color:#ff79c6>.</span>urls),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span> path(<span style=color:#f1fa8c>&#39;&#39;</span>, include(<span style=color:#f1fa8c>&#34;myapp.urls&#34;</span>))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>]</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-7 class=outline-3>
<h3 id=headline-7>
定义首页视图
</h3>
<div id=outline-text-headline-7 class=outline-text-3>
<p>在myapp/urls.py中添加</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>from</span> django.urls <span style=color:#ff79c6>import</span> path
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ff79c6>from</span> . <span style=color:#ff79c6>import</span> views
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>urlpatterns <span style=color:#ff79c6>=</span> [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>  path(<span style=color:#f1fa8c>&#39;&#39;</span>, views<span style=color:#ff79c6>.</span>index_handler)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>]</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-8 class=outline-3>
<h3 id=headline-8>
定义解析器
</h3>
<div id=outline-text-headline-8 class=outline-text-3>
<p>使用快捷键 option + enter 可以在views.py中快速创建解析器, 将views.py中的代码修改为</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>from</span> django.shortcuts <span style=color:#ff79c6>import</span> render, HttpResponse
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>index_handler</span>(request):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    <span style=color:#ff79c6>return</span> HttpResponse(<span style=color:#f1fa8c>&#39;Hello Django&#39;</span>)</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-9 class=outline-3>
<h3 id=headline-9>
运行manage.py
</h3>
<div id=outline-text-headline-9 class=outline-text-3>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>python3 manage.py runserver 8000</code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-10 class=outline-2>
<h2 id=headline-10>
基本路由映射
</h2>
<div id=outline-text-headline-10 class=outline-text-2>
<ul>
<li>
<p>总路由文件</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>urlpatterns <span style=color:#ff79c6>=</span> [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>path(<span style=color:#f1fa8c>&#39;admin/&#39;</span>, admin<span style=color:#ff79c6>.</span>site<span style=color:#ff79c6>.</span>urls),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>path(<span style=color:#f1fa8c>&#39;user/&#39;</span>, include(<span style=color:#f1fa8c>&#34;myapp.urls&#34;</span>))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>]</code></pre></div>
</div>
</li>
<li>
<p>myapp中的urls.py</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>urlpatterns <span style=color:#ff79c6>=</span> [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>path(<span style=color:#f1fa8c>&#39;name1&#39;</span>, views<span style=color:#ff79c6>.</span>index_handler)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>]</code></pre></div>
</div>
</li>
</ul>
<p>可通过[host地址/user/name1] 访问 views.index_ handler，并拿到index_ handler返回的数据</p>
</div>
</div>
<div id=outline-container-headline-11 class=outline-2>
<h2 id=headline-11>
命名空间
</h2>
<div id=outline-text-headline-11 class=outline-text-2>
<p>在总路由文件中的urlpatterns添加</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>path(<span style=color:#f1fa8c>&#39;user/&#39;</span>, include((<span style=color:#f1fa8c>&#39;myapp.urls&#39;</span>, <span style=color:#f1fa8c>&#39;myapp&#39;</span>), namespace<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;user&#39;</span>))</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-12 class=outline-2>
<h2 id=headline-12>
正则参数传递与接收
</h2>
<div id=outline-text-headline-12 class=outline-text-2>
<ol>
<li>
<p>导入re_ path</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>from</span> django.urls <span style=color:#ff79c6>import</span> re_path</code></pre></div>
</div>
</li>
<li>
<p>re_ path的使用</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>urlpatterns <span style=color:#ff79c6>=</span> [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    re_path(<span style=color:#f1fa8c>&#39;(\d+)&#39;</span>, views<span style=color:#ff79c6>.</span>re_handler)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>]</code></pre></div>
</div>
</li>
<li>
<p>处理器接收</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>re_handler</span>(request, num):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#ff79c6>return</span> HttpResponse(num) <span style=color:#6272a4># num对应正则表达式传递过来的参数</span></code></pre></div>
</div>
</li>
</ol>
</div>
</div>
<div id=outline-container-headline-13 class=outline-2>
<h2 id=headline-13>
基础正则表达式
</h2>
<div id=outline-text-headline-13 class=outline-text-2>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>. 除了\n和\r所有的字符</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>\d 数字</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>\D 非数字</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>\w 字母和下划线</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>\W 非字母和下划线</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>\s 空格，包括制表符，换页符</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>*出现次数 &gt;= 0</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>+出现次数 &gt;= 1</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>{n} 出现次数 = n</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>{n, m} m &gt;= 出现次数 &gt;= n</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>^ 以开头</code></pre>
</div>
<div class="src src-regex">
<pre tabindex=0><code class=language-regex data-lang=regex>$ 以结尾</code></pre>
</div>
</div>
</div>
<div id=outline-container-headline-14 class=outline-2>
<h2 id=headline-14>
反向解析处理器
</h2>
<div id=outline-text-headline-14 class=outline-text-2>
<ol>
<li>导入</li>
</ol>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>from</span> django.shortcuts <span style=color:#ff79c6>import</span> reverse</code></pre></div>
</div>
<ol>
<li>无参处理器解析</li>
</ol>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>reverse(<span style=color:#f1fa8c>&#39;[命名]&#39;</span>)</code></pre></div>
</div>
<ol>
<li>有参处理器解析</li>
</ol>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>reverse(<span style=color:#f1fa8c>&#39;[命名]&#39;</span>, args<span style=color:#ff79c6>=</span>([参数1], [参数2], <span style=color:#ff79c6>...</span>))</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-15 class=outline-2>
<h2 id=headline-15>
request和response
</h2>
<div id=outline-text-headline-15 class=outline-text-2>
<p>客户端向服务器request数据，服务器response数据给客户端</p>
<div id=outline-container-headline-16 class=outline-3>
<h3 id=headline-16>
request对象HttpRequest
</h3>
<div id=outline-text-headline-16 class=outline-text-3>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>method</td>
<td>返回请求的方式 (GET/POST)</td>
</tr>
<tr>
<td>path</td>
<td>返回页面的路径 (不包括域名)</td>
</tr>
<tr>
<td>META</td>
<td>封装请求头的数据 (字典类型，key大写，下划线连接)</td>
</tr>
<tr>
<td>GET</td>
<td>封装GET请求数据的QueryDict对象</td>
</tr>
<tr>
<td>POST</td>
<td>封装POST请求数据的QueryDict对象</td>
</tr>
<tr>
<td>FILES</td>
<td>封装上传文件数据</td>
</tr>
<tr>
<td>COOKIES</td>
<td>封装请求的cookies，类似字典的对象</td>
</tr>
<tr>
<td>session</td>
<td>可读写的类似字典的对象</td>
</tr>
</tbody>
</table>
<ul>
<li>GET请求会讲数据放在url中</li>
<li>POST请求会把数据封装在header里面，并加密</li>
<li>POST更安全，对于表单提交和敏感数据，通常使用POST请求</li>
<li>
<p>META的CONTENT_ TYPE请求正文的MIME类型</p>
<ol>
<li>text/html HTML</li>
<li>text/plain 普通文本</li>
<li>application/json Json</li>
</ol>
</li>
<li>
<p>Python字典和Json的区别</p>
<ol>
<li>Python使用None表示空，Json使用Null</li>
<li>Json中的true和false首字母小写</li>
</ol>
</li>
<li>COOKIES保存在客户端，例如自动登陆功能</li>
<li>session保存在服务端，保存敏感信息，根据COOKIES上传的值获取</li>
</ul>
</div>
</div>
<div id=outline-container-headline-17 class=outline-3>
<h3 id=headline-17>
response对象HttpResponse
</h3>
<div id=outline-text-headline-17 class=outline-text-3>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>HttpResponse(
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    content<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;[相应体]&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    content_type<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;[MIME类型]&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    status<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;[状态码]&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>)</code></pre></div>
</div>
<table>
<thead>
<tr>
<th class=align-right>状态码</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td class=align-right>200</td>
<td>请求成功</td>
</tr>
<tr>
<td class=align-right>400</td>
<td>客户端请求语法错误</td>
</tr>
<tr>
<td class=align-right>403</td>
<td>服务器拒绝请求</td>
</tr>
<tr>
<td class=align-right>404</td>
<td>没有找到对应页面</td>
</tr>
<tr>
<td class=align-right>500</td>
<td>服务器内部错误</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id=outline-container-headline-18 class=outline-3>
<h3 id=headline-18>
JsonResponse对象
</h3>
<div id=outline-text-headline-18 class=outline-text-3>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>from</span> django.http <span style=color:#ff79c6>import</span> JsonResponse
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>JsonResponse(
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>        <span style=color:#f1fa8c>&#34;edu&#34;</span>: <span style=color:#f1fa8c>&#34;education&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>        <span style=color:#f1fa8c>&#34;course&#34;</span>: <span style=color:#f1fa8c>&#34;Python语言&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>    },
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>    json_dumps_params<span style=color:#ff79c6>=</span>{<span style=color:#f1fa8c>&#34;ensure_ascii&#34;</span>: <span style=color:#ff79c6>False</span>} <span style=color:#6272a4># 保证中文正确显示</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span>)</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-19 class=outline-3>
<h3 id=headline-19>
重定向
</h3>
<div id=outline-text-headline-19 class=outline-text-3>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>from</span> django.shortcuts <span style=color:#ff79c6>import</span> redirect
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>redirect_handler</span>(request):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    <span style=color:#ff79c6>return</span> redirect(<span style=color:#f1fa8c>&#39;/user&#39;</span>) <span style=color:#6272a4># 重定向到用户首页</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span style=color:#6272a4># 通过reverse配合重定项</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span style=color:#ff79c6>from</span> django.shortcuts <span style=color:#ff79c6>import</span> reverse
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>rredirect_handler</span>(request):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span>    <span style=color:#ff79c6>return</span> redirect(reverse(<span style=color:#f1fa8c>&#34;user:index&#34;</span>)) <span style=color:#6272a4># 重定向到用户首页</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-20 class=outline-2>
<h2 id=headline-20>
前端
</h2>
<div id=outline-text-headline-20 class=outline-text-2>
<div id=outline-container-headline-21 class=outline-3>
<h3 id=headline-21>
标签语言
</h3>
<div id=outline-text-headline-21 class=outline-text-3>
<ol>
<li>
<p>双标签</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>&lt;<span style=color:#ff79c6>标签名</span>&gt;&lt;/<span style=color:#ff79c6>标签名</span>&gt;</code></pre></div>
</div>
</li>
<li>
<p>单标签</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>&lt;<span style=color:#ff79c6>标签名</span>/&gt;</code></pre></div>
</div>
</li>
</ol>
</div>
</div>
<div id=outline-container-headline-22 class=outline-3>
<h3 id=headline-22>
元素与属性
</h3>
<div id=outline-text-headline-22 class=outline-text-3>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>&lt;<span style=color:#ff79c6>标签名</span> <span style=color:#50fa7b>属性名</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>属性值</span>&gt;元素&lt;/<span style=color:#ff79c6>标签名</span>&gt;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>&lt;<span style=color:#ff79c6>标签名</span> <span style=color:#50fa7b>属性名</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>属性值/</span>&gt;</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-23 class=outline-3>
<h3 id=headline-23>
其他资源
</h3>
<div id=outline-text-headline-23 class=outline-text-3>
<p><a href=https://web.stanford.edu/group/csp/cs21/htmlcheatsheet.pdf>Stanford HTML Cheatsheet</a></p>
<dl>
<dt>
HTML
</dt>
<dd>名词</dd>
<dt>
CSS
</dt>
<dd>形容词</dd>
<dt>
javascript
</dt>
<dd>动词</dd>
</dl>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-24 class=outline-2>
<h2 id=headline-24>
模板原理
</h2>
<div id=outline-text-headline-24 class=outline-text-2>
<div id=outline-container-headline-25 class=outline-3>
<h3 id=headline-25>
模板调用
</h3>
<div id=outline-text-headline-25 class=outline-text-3>
<ol>
<li>在templates文件夹中创建html文件，例如index.html</li>
<li>
<p>在视图中调用</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>index_handler</span>(request):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#ff79c6>return</span> render(request, <span style=color:#f1fa8c>&#39;index.html&#39;</span>)</code></pre></div>
</div>
</li>
</ol>
</div>
</div>
<div id=outline-container-headline-26 class=outline-3>
<h3 id=headline-26>
模板传参
</h3>
<div id=outline-text-headline-26 class=outline-text-3>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>index_handler</span>(request):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    context <span style=color:#ff79c6>=</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>        <span style=color:#f1fa8c>&#39;username&#39;</span>: <span style=color:#f1fa8c>&#39;name1&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span> <span style=color:#f1fa8c>&#39;password&#39;</span>: <span style=color:#f1fa8c>&#39;pass1&#39;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span style=color:#ff79c6>return</span> render(request, <span style=color:#f1fa8c>&#39;index.html&#39;</span>, context)</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-27 class=outline-3>
<h3 id=headline-27>
模板层基础语法
</h3>
<div id=outline-text-headline-27 class=outline-text-3>
<div id=outline-container-headline-28 class=outline-4>
<h4 id=headline-28>
参数输出
</h4>
<div id=outline-text-headline-28 class=outline-text-4>
<ol>
<li>
<p>普通值</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{{ key1 }}</code></pre></div>
</div>
</li>
<li>
<p>列表值</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{{ key2.0 }} {{ key2.1 }}</code></pre></div>
</div>
</li>
<li>
<p>字典值</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{{ key3.key3_1 }} {{ key3.key3_2 }}</code></pre></div>
</div>
</li>
</ol>
<p>变量名不可以以下划线开头, {#…#}是模版层中的注释</p>
</div>
</div>
<div id=outline-container-headline-29 class=outline-4>
<h4 id=headline-29>
循环语句
</h4>
<div id=outline-text-headline-29 class=outline-text-4>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>context <span style=color:#ff79c6>=</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#f1fa8c>&#39;loves&#39;</span>: [<span style=color:#f1fa8c>&#39;python&#39;</span>, <span style=color:#f1fa8c>&#39;c++&#39;</span>, <span style=color:#f1fa8c>&#39;java&#39;</span>]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>}</code></pre></div>
</div>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{% for love in loves %}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>{% endfor %}</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-30 class=outline-4>
<h4 id=headline-30>
判断语句
</h4>
<div id=outline-text-headline-30 class=outline-text-4>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{% if 条件%}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>{% elif 条件%}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>{% else 条件%}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>{% endif 条件%}</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-31 class=outline-4>
<h4 id=headline-31>
视图函数地址
</h4>
<div id=outline-text-headline-31 class=outline-text-4>
<ul>
<li>不需要额外传参的视图函数</li>
</ul>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{% url &#34;[namespace]:[name]&#34; %}</code></pre></div>
</div>
<ul>
<li>
<p>需要传参的视图函数，例如</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>def</span> <span style=color:#50fa7b>re_handler</span>(request, num):</code></pre></div>
</div>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{% url &#34;[namespace]:[name]&#34; [传递的参数] %}</code></pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-32 class=outline-3>
<h3 id=headline-32>
模板过滤器
</h3>
<div id=outline-text-headline-32 class=outline-text-3>
<dl>
<dt>
过滤器
</dt>
<dd>模板中对传递过来的数据进行修饰，再进行显示</dd>
<dt>
?
</dt>
<dd>
<p>过滤器语法</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{{ 变量|过滤器关键字: 参数  }}</code></pre></div>
</div>
<p>如果没有参数传递，可以不写</p>
</dd>
</dl>
<div id=outline-container-headline-33 class=outline-4>
<h4 id=headline-33>
常用过滤器
</h4>
<div id=outline-text-headline-33 class=outline-text-4>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>safe</td>
<td>禁止HTML转义</td>
</tr>
<tr>
<td>length</td>
<td>长度</td>
</tr>
<tr>
<td>date</td>
<td>日期 (Y-m-d H:i:s)</td>
</tr>
<tr>
<td>default</td>
<td>默认值</td>
</tr>
<tr>
<td>upper</td>
<td>转大写</td>
</tr>
<tr>
<td>lower</td>
<td>转小写</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-34 class=outline-3>
<h3 id=headline-34>
模板复用和block提取
</h3>
<div id=outline-text-headline-34 class=outline-text-3>
<ol>
<li>
<p>模板继承</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{% extends &#34;[父模板路径]&#34; %}</code></pre></div>
</div>
</li>
<li>
<p>block块定义与重写</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{% block [代码块名称] %}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>{% endblock %}</code></pre></div>
</div>
<p>调用父模板中的代码</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{{ block.super }}</code></pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-35 class=outline-2>
<h2 id=headline-35>
MySQL数据库基础
</h2>
<div id=outline-text-headline-35 class=outline-text-2>
<div id=outline-container-headline-36 class=outline-3>
<h3 id=headline-36>
数据库的创建与删除
</h3>
<div id=outline-text-headline-36 class=outline-text-3>
<table>
<thead>
<tr>
<th>操作</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>创建数据库</td>
<td>create database [数据库名];</td>
</tr>
<tr>
<td>删除数据库</td>
<td>drop database [数据库名];</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id=outline-container-headline-37 class=outline-3>
<h3 id=headline-37>
使用与查看数据库
</h3>
<div id=outline-text-headline-37 class=outline-text-3>
<table>
<thead>
<tr>
<th>操作</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>使用数据库</td>
<td>use [数据库名];</td>
</tr>
<tr>
<td>查看所有的数据库</td>
<td>show databases;</td>
</tr>
<tr>
<td>查看当前使用的数据库</td>
<td>select database();</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id=outline-container-headline-38 class=outline-3>
<h3 id=headline-38>
数据库编码
</h3>
<div id=outline-text-headline-38 class=outline-text-3>
<table>
<thead>
<tr>
<th>操作</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>创建数据库并指定编码 (utf-8)</td>
<td>create database [数据库名] charset="utf8";</td>
</tr>
<tr>
<td>修改数据库编码（gbk）</td>
<td>alter database [数据库名] charset="gbk";</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id=outline-container-headline-39 class=outline-3>
<h3 id=headline-39>
常用数据类型
</h3>
<div id=outline-text-headline-39 class=outline-text-3>
<ol>
<li>
<p>整数</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>tinyint</td>
<td>-2^7 ~ 2^7 - 1</td>
</tr>
<tr>
<td>smallint</td>
<td>-2^16 ~ 2^16 - 1</td>
</tr>
<tr>
<td>mediumint</td>
<td>-2^23 ~ 2^23 - 1</td>
</tr>
<tr>
<td>int</td>
<td>-2^31 ~ 2^31 - 1</td>
</tr>
<tr>
<td>bigint</td>
<td>-2^63 ~ 2^63 - 1</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>定点数</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>decimal(m, d)</td>
<td>总位数 &lt; m, 小数位 = d</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>浮点数</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>float(m, d)</td>
<td>16位精度，总位数 &lt; m, 小数位 = d</td>
</tr>
<tr>
<td>double(m, d)</td>
<td>16位精度，总位数 &lt; m, 小数位 = d</td>
</tr>
</tbody>
</table>
<p>浮点数只能保证最多8或16位的准确性，其余的数字随机填充</p>
</li>
<li>
<p>字符串</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>char(n)</td>
<td>固定字符串长度n</td>
</tr>
<tr>
<td>varchar(n)</td>
<td>最大字符串长度n</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>日期</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>datetime</td>
<td>YYYY-MM-DD HH:MM:SS</td>
</tr>
<tr>
<td>date</td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td>time</td>
<td>HH:MM:SS</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>布尔</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>boolean</td>
<td>true/false</td>
</tr>
</tbody>
</table>
<p>底层其实是tinyint</p>
</li>
</ol>
</div>
</div>
<div id=outline-container-headline-40 class=outline-3>
<h3 id=headline-40>
创建表结构
</h3>
<div id=outline-text-headline-40 class=outline-text-3>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>create</span> <span style=color:#ff79c6>table</span> [表名] (
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    [字段名] [字段类型] [字段约束],
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    [字段名] [字段类型] [字段约束]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>);</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-41 class=outline-3>
<h3 id=headline-41>
常用字段约束
</h3>
<div id=outline-text-headline-41 class=outline-text-3>
<table>
<thead>
<tr>
<th>约束类型</th>
<th>关键字</th>
</tr>
</thead>
<tbody>
<tr>
<td>主键自增</td>
<td>primary key auto_increment</td>
</tr>
<tr>
<td>不能重复</td>
<td>unique</td>
</tr>
<tr>
<td>不能为空</td>
<td>not null</td>
</tr>
<tr>
<td>默认值</td>
<td>default</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id=outline-container-headline-42 class=outline-3>
<h3 id=headline-42>
查询操作
</h3>
<div id=outline-text-headline-42 class=outline-text-3>
<ol>
<li>
<p>查看表内所有数据</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名];</code></pre></div>
</div>
<p>*表示为所有字段</p>
</li>
<li>
<p>查看指定字段 </p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> [字段<span style=color:#bd93f9>1</span>], [字段<span style=color:#bd93f9>2</span>] <span style=color:#ff79c6>from</span> [表名];</code></pre></div>
</div>
</li>
<li>
<p>比较条件查询</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [条件];</code></pre></div>
</div>
<table>
<thead>
<tr>
<th>条件</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>相等</td>
<td>=</td>
</tr>
<tr>
<td>不相等</td>
<td>!=</td>
</tr>
<tr>
<td>为空</td>
<td>is null</td>
</tr>
<tr>
<td>不为空</td>
<td>is not null</td>
</tr>
<tr>
<td>大于</td>
<td>></td>
</tr>
<tr>
<td>小于</td>
<td>&lt;</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>模糊查询</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [字段] <span style=color:#ff79c6>like</span> <span style=color:#f1fa8c>&#34;表达式&#34;</span>;</code></pre></div>
</div>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>%</td>
<td>匹配任意多的字符</td>
</tr>
<tr>
<td>_</td>
<td>匹配一个字符，汉字需要使用两个</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>范围查询</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [字段] <span style=color:#ff79c6>in</span> ([可能<span style=color:#bd93f9>1</span>], [可能<span style=color:#bd93f9>2</span>], ...);</code></pre></div>
</div>
</li>
<li>
<p>逻辑运算符</p>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>and</td>
<td>与</td>
</tr>
<tr>
<td>or</td>
<td>或</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>分组</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [条件] <span style=color:#ff79c6>group</span> <span style=color:#ff79c6>by</span> [字段<span style=color:#bd93f9>1</span>], [字段<span style=color:#bd93f9>2</span>], ...;</code></pre></div>
</div>
<ol>
<li>按照哪个字段分组，哪个字段就不会重复</li>
<li>group by要写在where的后面</li>
</ol>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [条件] <span style=color:#ff79c6>group</span> <span style=color:#ff79c6>by</span> [字段<span style=color:#bd93f9>1</span>], [字段<span style=color:#bd93f9>2</span>], ... <span style=color:#ff79c6>having</span> [条件];</code></pre></div>
</div>
<ol>
<li>where是对select…的结果进行筛选</li>
<li>having是对group by的结果进行筛选</li>
</ol>
</li>
<li>
<p>排序</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [条件] <span style=color:#ff79c6>group</span> <span style=color:#ff79c6>by</span> [字段<span style=color:#bd93f9>1</span>], [字段<span style=color:#bd93f9>2</span>], ... <span style=color:#ff79c6>having</span> [条件] <span style=color:#ff79c6>order</span> <span style=color:#ff79c6>by</span> [字段<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>asc</span><span style=color:#ff79c6>/</span><span style=color:#ff79c6>desc</span>, [字段<span style=color:#bd93f9>2</span>] <span style=color:#ff79c6>asc</span><span style=color:#ff79c6>/</span><span style=color:#ff79c6>desc</span>;</code></pre></div>
</div>
<dl>
<dt>
asc
</dt>
<dd>升序</dd>
<dt>
desc
</dt>
<dd>降序</dd>
<dt>
排序优先级
</dt>
<dd>先按照 [字段1] 排序， 如果相同，那么按照 [字段2] 排序</dd>
</dl>
</li>
<li>
<p>分页</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [条件] <span style=color:#ff79c6>group</span> <span style=color:#ff79c6>by</span> [字段<span style=color:#bd93f9>1</span>], [字段<span style=color:#bd93f9>2</span>], ... <span style=color:#ff79c6>having</span> [条件] <span style=color:#ff79c6>order</span> <span style=color:#ff79c6>by</span> [字段<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>asc</span><span style=color:#ff79c6>/</span><span style=color:#ff79c6>desc</span>, [字段<span style=color:#bd93f9>2</span>] <span style=color:#ff79c6>asc</span><span style=color:#ff79c6>/</span><span style=color:#ff79c6>desc</span> <span style=color:#ff79c6>limit</span> [起始索引], [数据条数];</code></pre></div>
</div>
</li>
</ol>
</div>
</div>
<div id=outline-container-headline-43 class=outline-3>
<h3 id=headline-43>
增删改查
</h3>
<div id=outline-text-headline-43 class=outline-text-3>
<ol>
<li>
<p>插入数据</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>insert</span> <span style=color:#ff79c6>into</span> [表名] value ([数据<span style=color:#bd93f9>1</span>], [数据<span style=color:#bd93f9>2</span>], ...);</code></pre></div>
</div>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>insert</span> <span style=color:#ff79c6>into</span> [表名] ([字段名<span style=color:#bd93f9>1</span>], [字段名<span style=color:#bd93f9>2</span>], ...) value ([数据<span style=color:#bd93f9>1</span>], [数据<span style=color:#bd93f9>2</span>], ...);</code></pre></div>
</div>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>insert</span> <span style=color:#ff79c6>into</span> [表名] ([字段名<span style=color:#bd93f9>1</span>], [字段名<span style=color:#bd93f9>2</span>], ...) <span style=color:#ff79c6>values</span> ([数据<span style=color:#bd93f9>1</span>], [数据<span style=color:#bd93f9>2</span>], ...), ([数据<span style=color:#bd93f9>3</span>], [数据<span style=color:#bd93f9>4</span>], ...);</code></pre></div>
</div>
</li>
<li>
<p>修改数据</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>update</span> [表名] <span style=color:#ff79c6>set</span> [字段<span style=color:#bd93f9>1</span>] <span style=color:#ff79c6>=</span> [值<span style=color:#bd93f9>1</span>], [字段<span style=color:#bd93f9>2</span>] <span style=color:#ff79c6>=</span> [值<span style=color:#bd93f9>2</span>] ... <span style=color:#ff79c6>where</span> <span style=color:#ff79c6>=</span> [条件];</code></pre></div>
</div>
</li>
<li>
<p>删除数据</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>delete</span> <span style=color:#ff79c6>from</span> [表名] <span style=color:#ff79c6>where</span> [条件];</code></pre></div>
</div>
</li>
</ol>
<dl>
<dt>
插入数据
</dt>
<dd>多条数据插入尽量用一条sql语句，提高性能 </dd>
</dl>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>delete</td>
<td>删除表内行数据</td>
</tr>
<tr>
<td>drop table</td>
<td>删除整个表，可以恢复</td>
</tr>
<tr>
<td>truncate</td>
<td>删除整个表，快速，但不可恢复</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id=outline-container-headline-44 class=outline-3>
<h3 id=headline-44>
多表操作
</h3>
<div id=outline-text-headline-44 class=outline-text-3>
<ol>
<li>
<p>一对多</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>create</span> <span style=color:#ff79c6>table</span> <span style=color:#ff79c6>user</span> (
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    id <span style=color:#8be9fd;font-style:italic>int</span> <span style=color:#ff79c6>primary</span> <span style=color:#ff79c6>key</span> auto_increment, username <span style=color:#8be9fd;font-style:italic>varchar</span>(<span style=color:#bd93f9>16</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>);</code></pre></div>
</div>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>create</span> <span style=color:#ff79c6>table</span> forum(
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    id <span style=color:#8be9fd;font-style:italic>int</span> <span style=color:#ff79c6>primary</span> <span style=color:#ff79c6>key</span> auto_increment,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    topic <span style=color:#8be9fd;font-style:italic>varchar</span>(<span style=color:#bd93f9>200</span>),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    user_id <span style=color:#8be9fd;font-style:italic>int</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>    <span style=color:#ff79c6>constraint</span> fu1 <span style=color:#ff79c6>foreign</span> <span style=color:#ff79c6>key</span> (user_id) <span style=color:#ff79c6>references</span> <span style=color:#ff79c6>user</span>(id) <span style=color:#ff79c6>on</span> <span style=color:#ff79c6>delete</span> <span style=color:#ff79c6>CASCADE</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>);</code></pre></div>
</div>
<table>
<thead>
<tr>
<th>级联类型</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>on delete restrict</td>
<td>默认值，抛异常</td>
</tr>
<tr>
<td>on delete cascade</td>
<td>如果主表被引用的外键删除，相关 联的表的记录也会被删除</td>
</tr>
<tr>
<td>on delete set null</td>
<td>如果主表被引用的外键删除，相关 联的表的外键设置为空</td>
</tr>
<tr>
<td>on delete no action</td>
<td>什么也不做</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>多对多</p>
<div class="src src-sql">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>create</span> <span style=color:#ff79c6>table</span> user_forum(
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    id <span style=color:#8be9fd;font-style:italic>int</span> <span style=color:#ff79c6>primary</span> <span style=color:#ff79c6>key</span> auto_increment,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>    user_id <span style=color:#8be9fd;font-style:italic>int</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>    forum_id <span style=color:#8be9fd;font-style:italic>int</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>    <span style=color:#ff79c6>constraint</span> c1 <span style=color:#ff79c6>foreign</span> <span style=color:#ff79c6>key</span> (user_id) <span style=color:#ff79c6>references</span> <span style=color:#ff79c6>user</span>(id) <span style=color:#ff79c6>on</span> <span style=color:#ff79c6>delete</span> <span style=color:#ff79c6>cascade</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>    <span style=color:#ff79c6>constraint</span> c2 <span style=color:#ff79c6>foreign</span> <span style=color:#ff79c6>key</span> (forum_id) <span style=color:#ff79c6>references</span> forum(id) <span style=color:#ff79c6>on</span> <span style=color:#ff79c6>delete</span> <span style=color:#ff79c6>cascade</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>);</code></pre></div>
</div>
</li>
<li>
<p>一对一
不常用，应用场景:</p>
<ol>
<li>单张表内字段数太多 </li>
<li>敏感信息分离</li>
</ol>
</li>
</ol>
</div>
</div>
<div id=outline-container-headline-45 class=outline-3>
<h3 id=headline-45>
ORM
</h3>
<div id=outline-text-headline-45 class=outline-text-3>
<ol>
<li>
<p>配置
Settings中:</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>DATABASES <span style=color:#ff79c6>=</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#f1fa8c>&#39;default&#39;</span>: {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>        <span style=color:#f1fa8c>&#39;ENGINE&#39;</span> : <span style=color:#f1fa8c>&#39;django.db.backends.mysql&#39;</span>, 
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>        <span style=color:#f1fa8c>&#39;HOST&#39;</span>: <span style=color:#f1fa8c>&#39;localhost&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>        <span style=color:#f1fa8c>&#39;PORT&#39;</span>: <span style=color:#f1fa8c>&#39;3306&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>        <span style=color:#f1fa8c>&#39;NAME&#39;</span>: <span style=color:#f1fa8c>&#39;【数据库名称】&#39;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>        <span style=color:#f1fa8c>&#39;USER&#39;</span>: <span style=color:#f1fa8c>&#39;【MySQL账号】&#39;</span>, <span style=color:#f1fa8c>&#39;PASSWORD&#39;</span>: <span style=color:#f1fa8c>&#39;【密码】&#39;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span>}</code></pre></div>
</div>
</li>
<li>
<p>表与字段定义
models.py中:</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>User</span>(models<span style=color:#ff79c6>.</span>Model):
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#8be9fd;font-style:italic>id</span> <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>AutoField(primary_key<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>username <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>CharField(max_length<span style=color:#ff79c6>=</span><span style=color:#bd93f9>16</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>password <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>CharField(max_length<span style=color:#ff79c6>=</span><span style=color:#bd93f9>16</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>gender <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>PositiveSmallIntegerField()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>age <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>IntegerField()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>createDatetime <span style=color:#ff79c6>=</span> models<span style=color:#ff79c6>.</span>DateTimeField()</code></pre></div>
</div>
<p>字段名不要用 __ 开头</p>
<table>
<thead>
<tr>
<th>字段类型关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>AutoField</td>
<td>自动增长的整数(相当于:int auto_increment)</td>
</tr>
<tr>
<td>IntegerField</td>
<td>整数 int</td>
</tr>
<tr>
<td>FloatField</td>
<td>浮点数</td>
</tr>
<tr>
<td>Decimal</td>
<td>定点数</td>
</tr>
<tr>
<td>CharField</td>
<td>字符串 varchar()</td>
</tr>
<tr>
<td>TextField</td>
<td>大文本 Text</td>
</tr>
<tr>
<td>BooleanField</td>
<td>True/False</td>
</tr>
<tr>
<td>DateTimeField</td>
<td>日期 Datetime: YYYY-MM-DD HH:MM:SS</td>
</tr>
<tr>
<td>EmailFiled</td>
<td>邮箱</td>
</tr>
<tr>
<td>ImageField</td>
<td>图片</td>
</tr>
<tr>
<td>primary_key</td>
<td>是否是主键</td>
</tr>
<tr>
<td>null</td>
<td>能否为空</td>
</tr>
<tr>
<td>unique</td>
<td>能否重复</td>
</tr>
<tr>
<td>default</td>
<td>默认值</td>
</tr>
<tr>
<td>blank</td>
<td>在django管理后台新增或编辑一条表数据 时，该字段能否为空 null是数据库范畴，blank是表单验证范畴</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>数据库迁移与维护</p>
<ul>
<li>生成迁移文件</li>
</ul>
</li>
</ol>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>python manage.py makemigration</code></pre></div>
</div>
<ul>
<li>执行迁移文件</li>
</ul>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>python manage.py migrate</code></pre></div>
</div>
<ol>
<li>
<p>增删改查</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span>user <span style=color:#ff79c6>=</span> User()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>user<span style=color:#ff79c6>.</span>username <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;name1&#39;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>user<span style=color:#ff79c6>.</span>id
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>user<span style=color:#ff79c6>.</span>save()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>user<span style=color:#ff79c6>.</span>password <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;pass1&#39;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>user<span style=color:#ff79c6>.</span>save()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>user<span style=color:#ff79c6>.</span>delete()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>user <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>create(
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    username <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;name2&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#6272a4># 修改</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(【条件】)<span style=color:#ff79c6>.</span>update(属性<span style=color:#ff79c6>=</span>属性值)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span style=color:#6272a4># 例如</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(<span style=color:#8be9fd;font-style:italic>id</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>2</span>)<span style=color:#ff79c6>.</span>update(password<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;pass2&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span style=color:#6272a4># 删除</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(<span style=color:#8be9fd;font-style:italic>id</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>2</span>)<span style=color:#ff79c6>.</span>delete()</code></pre></div>
</div>
</li>
</ol>
</div>
</div>
<div id=outline-container-headline-46 class=outline-3>
<h3 id=headline-46>
模型类的查询方法
</h3>
<div id=outline-text-headline-46 class=outline-text-3>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>all()</td>
<td>返回所有</td>
</tr>
<tr>
<td>get(条件)</td>
<td>返回满足条件的数据</td>
</tr>
<tr>
<td>filter(条件)</td>
<td>返回满足条件的数据</td>
</tr>
<tr>
<td>exclude(条件)</td>
<td>返回不满足条件的数据</td>
</tr>
</tbody>
</table>
<p>get方法必须返回一个对象 如果没有满足条件的对象，或者有多个满足条件的对象，都会报异常 <br>
all、filter、exclude返回的结果类型是QuerySet(类似列表)</p>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>users <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>all()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>users <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(<span style=color:#8be9fd;font-style:italic>id</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>users <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>exclude(<span style=color:#8be9fd;font-style:italic>id</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>)</code></pre></div>
</div>
<div id=outline-container-headline-47 class=outline-4>
<h4 id=headline-47>
比较查询
</h4>
<div id=outline-text-headline-47 class=outline-text-4>
<table>
<thead>
<tr>
<th>条件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>相等</td>
<td>exact</td>
</tr>
<tr>
<td>大于</td>
<td>gt</td>
</tr>
<tr>
<td>大于等于</td>
<td>gte</td>
</tr>
<tr>
<td>小于</td>
<td>lt</td>
</tr>
<tr>
<td>小于等于</td>
<td>lte</td>
</tr>
<tr>
<td>为空查询</td>
<td>isnull</td>
</tr>
</tbody>
</table>
<dl>
<dt>
条件格式
</dt>
<dd>【字段名】__【条件关键字】=【比较值】</dd>
</dl>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#6272a4># 查询id&gt;=2的所有用户</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>users <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(id__gte<span style=color:#ff79c6>=</span><span style=color:#bd93f9>2</span>)</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-48 class=outline-4>
<h4 id=headline-48>
模糊查询
</h4>
<div id=outline-text-headline-48 class=outline-text-4>
<table>
<thead>
<tr>
<th>条件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>包含</td>
<td>contains</td>
</tr>
<tr>
<td>开头</td>
<td>startswith</td>
</tr>
<tr>
<td>结尾</td>
<td>endswith</td>
</tr>
</tbody>
</table>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#6272a4># 查询用户名中包含&#39;1&#39;的用户</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>user1_s <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(username__contains<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;1&#39;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#6272a4># 查询用户名以&#39;name1&#39;开头的用户</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>user2_s <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(username__startswith<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;name1&#39;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span style=color:#6272a4># 查询邮箱以&#39;@qq.com&#39;结尾的用户</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>user3_s <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(email__endswith<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;@qq.com&#39;</span>)</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-49 class=outline-4>
<h4 id=headline-49>
范围查询
</h4>
<div id=outline-text-headline-49 class=outline-text-4>
<table>
<thead>
<tr>
<th>条件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>范围</td>
<td>in</td>
</tr>
</tbody>
</table>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#6272a4># 查询username属于[&#34;name1&#34;，&#34;name2&#34;]的user对象</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>users <span style=color:#ff79c6>=</span> User<span style=color:#ff79c6>.</span>objects<span style=color:#ff79c6>.</span>filter(username__in<span style=color:#ff79c6>=</span> [<span style=color:#f1fa8c>&#34;name1&#34;</span>，<span style=color:#f1fa8c>&#34;name2&#34;</span>]</code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-50 class=outline-2>
<h2 id=headline-50>
Redis
</h2>
<div id=outline-text-headline-50 class=outline-text-2>
<div id=outline-container-headline-51 class=outline-3>
<h3 id=headline-51>
安装包
</h3>
<div id=outline-text-headline-51 class=outline-text-3>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>pip3 install redis
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>pip3 install django-redis
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>pip3 install django-redis-sessions</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-52 class=outline-3>
<h3 id=headline-52>
settings配置
</h3>
<div id=outline-text-headline-52 class=outline-text-3>
<div class="src src-python">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>SESSION_ENGINE <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;redis_sessions.session&#39;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>SESSION_REDIS_HOST <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;localhost&#39;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>SESSION_REDIS_PORT <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>6379</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>SESSION_REDIS_DB <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>0</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>SESSION_REDIS_PASSWORD <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;&#39;</span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-53 class=outline-2>
<h2 id=headline-53>
CSRF跨域
</h2>
<div id=outline-text-headline-53 class=outline-text-2>
<div id=outline-container-headline-54 class=outline-3>
<h3 id=headline-54>
添加CSRF_TOKEN
</h3>
<div id=outline-text-headline-54 class=outline-text-3>
<p>在form表单中添加</p>
<div class="src src-html">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>{% csrf_token %}</code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
<li><a href=https://archive.casouri.cat>BHL0388</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#headline-1>环境搭建与入门案例</a>
<ul>
<li><a href=#headline-2>环境搭建</a>
</li>
<li><a href=#headline-3>主文件夹中的文件</a>
</li>
<li><a href=#headline-4>项目搭建步骤</a>
</li>
<li><a href=#headline-5>创建app并在settings中配置</a>
</li>
<li><a href=#headline-6>创建urls.py并在总路由中配置</a>
</li>
<li><a href=#headline-7>定义首页视图</a>
</li>
<li><a href=#headline-8>定义解析器</a>
</li>
<li><a href=#headline-9>运行manage.py</a>
</li>
</ul>
</li>
<li><a href=#headline-10>基本路由映射</a>
</li>
<li><a href=#headline-11>命名空间</a>
</li>
<li><a href=#headline-12>正则参数传递与接收</a>
</li>
<li><a href=#headline-13>基础正则表达式</a>
</li>
<li><a href=#headline-14>反向解析处理器</a>
</li>
<li><a href=#headline-15>request和response</a>
<ul>
<li><a href=#headline-16>request对象HttpRequest</a>
</li>
<li><a href=#headline-17>response对象HttpResponse</a>
</li>
<li><a href=#headline-18>JsonResponse对象</a>
</li>
<li><a href=#headline-19>重定向</a>
</li>
</ul>
</li>
<li><a href=#headline-20>前端</a>
<ul>
<li><a href=#headline-21>标签语言 </a>
</li>
<li><a href=#headline-22>元素与属性</a>
</li>
<li><a href=#headline-23>其他资源</a>
</li>
</ul>
</li>
<li><a href=#headline-24>模板原理</a>
<ul>
<li><a href=#headline-25>模板调用</a>
</li>
<li><a href=#headline-26>模板传参</a>
</li>
<li><a href=#headline-27>模板层基础语法</a>
<ul>
<li><a href=#headline-28>参数输出</a>
</li>
<li><a href=#headline-29>循环语句</a>
</li>
<li><a href=#headline-30>判断语句</a>
</li>
<li><a href=#headline-31>视图函数地址</a>
</li>
</ul>
</li>
<li><a href=#headline-32>模板过滤器</a>
<ul>
<li><a href=#headline-33>常用过滤器</a>
</li>
</ul>
</li>
<li><a href=#headline-34>模板复用和block提取</a>
</li>
</ul>
</li>
<li><a href=#headline-35>MySQL数据库基础</a>
<ul>
<li><a href=#headline-36>数据库的创建与删除</a>
</li>
<li><a href=#headline-37>使用与查看数据库</a>
</li>
<li><a href=#headline-38>数据库编码</a>
</li>
<li><a href=#headline-39>常用数据类型</a>
</li>
<li><a href=#headline-40>创建表结构</a>
</li>
<li><a href=#headline-41>常用字段约束</a>
</li>
<li><a href=#headline-42>查询操作</a>
</li>
<li><a href=#headline-43>增删改查</a>
</li>
<li><a href=#headline-44>多表操作</a>
</li>
<li><a href=#headline-45>ORM</a>
</li>
<li><a href=#headline-46>模型类的查询方法</a>
<ul>
<li><a href=#headline-47>比较查询</a>
</li>
<li><a href=#headline-48>模糊查询</a>
</li>
<li><a href=#headline-49>范围查询</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href=#headline-50>Redis</a>
<ul>
<li><a href=#headline-51>安装包</a>
</li>
<li><a href=#headline-52>settings配置</a>
</li>
</ul>
</li>
<li><a href=#headline-53>CSRF跨域</a>
<ul>
<li><a href=#headline-54>添加CSRF_TOKEN</a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&text=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&title=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&is_video=false&description=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91&body=Check out this article: https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&title=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&title=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&name=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91&description=%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba%e4%b8%8e%e5%85%a5%e9%97%a8%e6%a1%88%e4%be%8b%20%20%e7%8e%af%e5%a2%83%e6%90%ad%e5%bb%ba%20%201pip3%20install%20django%3d%3d2.2%202pip3%20install%20pymysql%203pip3%20install%20mysqlclient%204pip3%20install%20pillow%20%20%20%20%e4%b8%bb%e6%96%87%e4%bb%b6%e5%a4%b9%e4%b8%ad%e7%9a%84%e6%96%87%e4%bb%b6%20%20%20%20settings.py%20%20%e6%80%bb%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%20%20urls.py%20%20%e6%80%bb%e8%b7%af%e7%94%b1%e6%98%a0%e5%b0%84%e6%96%87%e4%bb%b6%2c%20%e6%8a%8a%e8%af%b7%e6%b1%82%e8%bf%87%e6%9d%a5%e7%9a%84url%e5%9c%b0%e5%9d%80%e8%bf%9b%e8%a1%8c%e5%88%86%e9%85%8d%ef%bc%8c%e5%88%86%e9%85%8d%e7%bb%99%e4%b8%8d%e5%90%8c%e7%9a%84handler%e5%a4%84%e7%90%86%e5%99%a8%ef%bc%8c%e5%a4%84%e7%90%86%e5%99%a8%e5%a4%84%e7%90%86%e5%be%97%e5%88%b0%e4%b8%8d%e5%90%8c%e7%9a%84%e7%bb%93%e6%9e%9c%ef%bc%8c%e5%b9%b6%e6%8a%8a%e7%bb%93%e6%9e%9c%e8%bf%94%e5%9b%9e%e7%bb%99%e6%b5%8f%e8%a7%88%e5%99%a8%20%20wsgi.py%20%20%e9%a1%b9%e7%9b%ae%e9%83%a8%e7%bd%b2%20%20%20%20%e9%a1%b9%e7%9b%ae%e6%90%ad%e5%bb%ba%e6%ad%a5%e9%aa%a4%20%20%20%e5%88%9b%e5%bb%baDjango%e9%a1%b9%e7%9b%ae%20%e5%88%9b%e5%bb%baapp%e5%b9%b6%e5%9c%a8settings%e4%b8%ad%e9%85%8d%e7%bd%ae%20%e5%88%9b%e5%bb%baurls.py%e5%b9%b6%e5%9c%a8%e6%80%bb%e8%b7%af%e7%94%b1%e4%b8%ad%e9%85%8d%e7%bd%ae%20%e5%ae%9a%e4%b9%89%e9%a6%96%e9%a1%b5%e8%a7%86%e5%9b%be%20%e5%ae%9a%e4%b9%89%e8%a7%a3%e6%9e%90%e5%99%a8%20%e8%bf%90%e8%a1%8cmanage.py%20%20%20%20%e5%88%9b%e5%bb%baapp%e5%b9%b6%e5%9c%a8settings%e4%b8%ad%e9%85%8d%e7%bd%ae%20%201django-admin%20startapp%20myapp%20%20%20%e9%80%9a%e8%bf%87settings.py%e5%bc%95%e5%85%a5%e5%88%9b%e5%bb%ba%e7%9a%84app%20%201INSTALLED_APPS%20%3d%20%5b%202%20%26%2339%3bdjango.contrib.admin%26%2339%3b%2c%203%20%26%2339%3bdjango.contrib.auth%26%2339%3b%2c%204%20%26%2339%3bdjango.contrib.contenttypes%26%2339%3b%2c%205%20%26%2339%3bdjango." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fdjango_note%2f&t=Python%e5%90%8e%e5%8f%b0%e5%bc%80%e5%8f%91" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2022 Yi Chen
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
<li><a href=https://archive.casouri.cat>BHL0388</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}}</script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
</html>