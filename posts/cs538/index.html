<!doctype html><html lang=en-us>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Theory and Design of Programming Languages | Yi Chen</title>
<link rel=canonical href=https://www.mrr1vfe.io/posts/cs538/>
<meta name=description content="This is my website">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Theory and Design of Programming Languages">
<meta property="og:description" content="Lecture 1 1  Functional programming  History    Based on $\lambda$ calculus
  Lisp
  ML
  Haskell
    Building block    function   take inputs as arguments and produce outputs.
  Functions are first class, like any other value. They can be passed to, returned by functions. Functions can also be combined into new function.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.mrr1vfe.io/posts/cs538/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-04-30T00:00:00+00:00">
<meta property="article:modified_time" content="2020-04-30T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Theory and Design of Programming Languages">
<meta name=twitter:description content="Lecture 1 1  Functional programming  History    Based on $\lambda$ calculus
  Lisp
  ML
  Haskell
    Building block    function   take inputs as arguments and produce outputs.
  Functions are first class, like any other value. They can be passed to, returned by functions. Functions can also be combined into new function.">
<link rel=stylesheet href=https://www.mrr1vfe.io/css/styles.4c2b9aa1d874d6766f554b2d404e8fd62ab4761f51ee9b3f358d12e81e7fa43a1b4378db995bc1926bbe5ed98c060be5e7bd4f2470504cf94f22b4b3a74e62b6.css integrity="sha512-TCuaodh01nZvVUstQE6P1iq0dh9R7ps/NY0S6B5/pDobQ3jbmVvBkmu+XtmMBgvl571PJHBQTPlPIrSzp05itg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=https://www.mrr1vfe.io/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
<li><a href=https://archive.casouri.cat>BHL0388</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=https://www.mrr1vfe.io/posts/memory-and-cache-review/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=https://www.mrr1vfe.io/posts/trpl/ aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&text=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&title=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&is_video=false&description=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Theory%20and%20Design%20of%20Programming%20Languages&body=Check out this article: https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&title=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&title=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&name=Theory%20and%20Design%20of%20Programming%20Languages&description=Lecture%201%201%20%20Functional%20programming%20%20History%20%20%20%20Based%20on%20%24%5clambda%24%20calculus%0a%20%20Lisp%0a%20%20ML%0a%20%20Haskell%0a%20%20%20%20Building%20block%20%20%20%20function%20%20%20take%20inputs%20as%20arguments%20and%20produce%20outputs.%0a%20%20Functions%20are%20first%20class%2c%20like%20any%20other%20value.%20They%20can%20be%20passed%20to%2c%20returned%20by%20functions.%20Functions%20can%20also%20be%20combined%20into%20new%20function." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&t=Theory%20and%20Design%20of%20Programming%20Languages" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#headline-1>Lecture 1 <sup class=footnote-reference>1</sup></a>
<ul>
<li><a href=#headline-2>Functional programming</a>
<ul>
<li><a href=#headline-3>History</a>
</li>
<li><a href=#headline-4>Building block</a>
</li>
<li><a href=#headline-5>Control side-effects</a>
</li>
</ul>
</li>
<li><a href=#headline-6>A taste of Haskell</a>
<ul>
<li><a href=#headline-7>Declaring function</a>
</li>
<li><a href=#headline-8>Calling function</a>
</li>
<li><a href=#headline-9>Multiple arguments</a>
</li>
<li><a href=#headline-10>Case analysis</a>
</li>
<li><a href=#headline-11>Case expression</a>
</li>
<li><a href=#headline-12>Declare variables</a>
</li>
<li><a href=#headline-13>Tuples</a>
</li>
<li><a href=#headline-14>List</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href=#headline-15>Functional Programming <sup class=footnote-reference>2</sup></a>
<ul>
<li><a href=#headline-16>Compilation</a>
</li>
<li><a href=#headline-17>Keywords</a>
</li>
<li><a href=#headline-18>lines</a>
</li>
<li><a href=#headline-19>Infix</a>
</li>
<li><a href=#headline-20>Data.List</a>
<ul>
<li><a href=#headline-21>Sublists</a>
</li>
<li><a href=#headline-22>Searching List</a>
</li>
<li><a href=#headline-23>Multiple List</a>
</li>
<li><a href=#headline-24>String handling</a>
</li>
</ul>
</li>
<li><a href=#headline-25>Loops</a>
<ul>
<li><a href=#headline-26>Fold</a>
</li>
</ul>
</li>
<li><a href=#headline-27>Lambda Function</a>
</li>
<li><a href=#headline-28>Partial Function and Currying</a>
</li>
<li><a href=#headline-29>As-pattern</a>
</li>
</ul>
</li>
<li><a href=#headline-30>Type Systems</a>
<ul>
<li><a href=#headline-31>Base types</a>
</li>
<li><a href=#headline-32>Function types</a>
</li>
<li><a href=#headline-33>Full simple types examples</a>
</li>
<li><a href=#headline-34>Typing context</a>
</li>
<li><a href=#headline-35>Together</a>
</li>
</ul>
</li>
<li><a href=#headline-36>Typeclasses <sup class=footnote-reference>3</sup></a>
<ul>
<li><a href=#headline-37>Define a Typeclass</a>
<ul>
<li><a href=#headline-38>Interpret the type of a typeclass</a>
</li>
</ul>
</li>
<li><a href=#headline-39>Define an instance</a>
</li>
</ul>
</li>
<li><a href=#headline-40>Review I</a>
<ul>
<li><a href=#headline-41>Haskell</a>
<ul>
<li><a href=#headline-42>Function</a>
</li>
<li><a href=#headline-43>Recursions</a>
</li>
<li><a href=#headline-44>Higher older function</a>
<ul>
<li><a href=#headline-45>.</a>
</li>
<li><a href=#headline-46>$</a>
</li>
</ul>
</li>
<li><a href=#headline-47>Curry</a>
</li>
<li><a href=#headline-48>Types</a>
</li>
<li><a href=#headline-49>Typeclasses / subclasses</a>
<ul>
<li><a href=#headline-50>Functors</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href=#headline-51>Theory</a>
</li>
</ul>
</li>
<li><a href=#headline-52>Rust Language</a>
</li>
<li><a href=#headline-53>References and Borrowing</a>
<ul>
<li><a href=#headline-54>Dereferencing</a>
</li>
<li><a href=#headline-55>Somewhat confusingly</a>
</li>
<li><a href=#headline-56>What's going one</a>
</li>
<li><a href=#headline-57>Multiple References</a>
</li>
<li><a href=#headline-58>Multiple Immutable</a>
</li>
<li><a href=#headline-59>At Most One Mutable</a>
</li>
<li><a href=#headline-60>Use Scopes to Manage References</a>
</li>
<li><a href=#headline-61>Alternative Reading</a>
</li>
<li><a href=#headline-62>Isn't a Reference Just a Pointer?</a>
</li>
<li><a href=#headline-63>Passing Arguments</a>
<ul>
<li><a href=#headline-64>"Moving" Arguments</a>
</li>
<li><a href=#headline-65>"Borrowing" Arguments</a>
</li>
</ul>
</li>
<li><a href=#headline-66>Variables Are Key</a>
</li>
<li><a href=#headline-67>Matching Can Move Data</a>
</li>
<li><a href=#headline-68>Matching on a reference</a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
Theory and Design of Programming Languages
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2020-04-30 00:00:00 +0000 UTC" itemprop=datePublished>2020-04-30</time>
</div>
<div class=article-read-time>
<i class="far fa-clock"></i>
14 minute read
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/pl rel=tag>PL</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<div id=outline-container-headline-1 class=outline-2>
<h2 id=headline-1>
Lecture 1 <sup class=footnote-reference><a id=footnote-reference-1 href=#footnote-1>1</a></sup>
</h2>
<div id=outline-text-headline-1 class=outline-text-2>
<div id=outline-container-headline-2 class=outline-3>
<h3 id=headline-2>
Functional programming
</h3>
<div id=outline-text-headline-2 class=outline-text-3>
<div id=outline-container-headline-3 class=outline-4>
<h4 id=headline-3>
History
</h4>
<div id=outline-text-headline-3 class=outline-text-4>
<ul>
<li>
<p>Based on $\lambda$ calculus</p>
</li>
<li>
<p>Lisp</p>
</li>
<li>
<p>ML</p>
</li>
<li>
<p>Haskell</p>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-4 class=outline-4>
<h4 id=headline-4>
Building block
</h4>
<div id=outline-text-headline-4 class=outline-text-4>
<dl>
<dt>
function
</dt>
<dd>
<p>take <strong>inputs</strong> as arguments and produce <strong>outputs</strong>.</p>
</dd>
</dl>
<p>Functions are first class, like any other value. They can be passed to, returned by functions. Functions can also be combined into new function.</p>
</div>
</div>
<div id=outline-container-headline-5 class=outline-4>
<h4 id=headline-5>
Control side-effects
</h4>
<div id=outline-text-headline-5 class=outline-text-4>
<p>Think about program is isolation</p>
<dl>
<dt>
pure function
</dt>
<dd>
<p>Described only by input and output. Always returns same result on fixed input.</p>
</dd>
<dt>
Hidden state
</dt>
<dd>
<p>avoid counters, local variables, etc.</p>
</dd>
<dt>
Manage side-effects
</dt>
<dd>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-6 class=outline-3>
<h3 id=headline-6>
A taste of Haskell
</h3>
<div id=outline-text-headline-6 class=outline-text-3>
<div id=outline-container-headline-7 class=outline-4>
<h4 id=headline-7>
Declaring function
</h4>
<div id=outline-text-headline-7 class=outline-text-4>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#6272a4>-- double is function&#39;s name, :: indicates the type of this function. Int -&gt; Int means it takes a Int as an input and outputs an Int</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>double</span> <span style=color:#ff79c6>::</span> <span style=color:#8be9fd>Int</span> <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Int</span> <span style=color:#6272a4>-- this line is optional, optional type signature / type annotation</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#50fa7b>double</span> n <span style=color:#ff79c6>=</span> n <span style=color:#ff79c6>+</span> n <span style=color:#6272a4>-- this is the function definition</span></code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-8 class=outline-4>
<h4 id=headline-8>
Calling function
</h4>
<div id=outline-text-headline-8 class=outline-text-4>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>myBool</span> <span style=color:#ff79c6>=</span> myFun <span style=color:#bd93f9>42</span> <span style=color:#6272a4>-- myFun is function name, 42 is the argument</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>myBool</span> <span style=color:#ff79c6>=</span> constFun <span style=color:#8be9fd;font-style:italic>()</span> <span style=color:#6272a4>-- () called unit, not taking value</span></code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-9 class=outline-4>
<h4 id=headline-9>
Multiple arguments
</h4>
<div id=outline-text-headline-9 class=outline-text-4>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>doubleTwos</span> <span style=color:#ff79c6>::</span> <span style=color:#8be9fd>Int</span> <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Int</span> <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Int</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>doubleTwos</span> x y <span style=color:#ff79c6>=</span> double x <span style=color:#ff79c6>+</span> double y</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-10 class=outline-4>
<h4 id=headline-10>
Case analysis
</h4>
<div id=outline-text-headline-10 class=outline-text-4>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>doubleIfBig</span> <span style=color:#ff79c6>::</span> <span style=color:#8be9fd>Int</span> <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Int</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>doubleIfBig</span> n <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>if</span> (n <span style=color:#ff79c6>&gt;</span> <span style=color:#bd93f9>100</span>) <span style=color:#ff79c6>then</span> n <span style=color:#ff79c6>+</span> n <span style=color:#ff79c6>else</span> n</code></pre></div>
</div>
<p>or</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>doubleIfBig&#39;</span> n
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>    <span style=color:#ff79c6>|</span> n <span style=color:#ff79c6>&gt;</span> <span style=color:#bd93f9>100</span> <span style=color:#ff79c6>=</span> n <span style=color:#ff79c6>+</span> n
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#ff79c6>|</span> otherwise <span style=color:#ff79c6>=</span> n</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-11 class=outline-4>
<h4 id=headline-11>
Case expression
</h4>
<div id=outline-text-headline-11 class=outline-text-4>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>listPrint</span> <span style=color:#ff79c6>::</span> [<span style=color:#8be9fd>Int</span>] <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>String</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>listPrint</span> l <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>case</span> l <span style=color:#ff79c6>of</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>              <span style=color:#8be9fd>[]</span> <span style=color:#ff79c6>-&gt;</span> <span style=color:#f1fa8c>&#34;Empty&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>              (x<span style=color:#8be9fd>:</span>xs) <span style=color:#ff79c6>-&gt;</span> show x <span style=color:#ff79c6>++</span> <span style=color:#f1fa8c>&#34; and &#34;</span> <span style=color:#ff79c6>++</span> show xs</code></pre></div>
</div>
<p>or</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>listPrint</span> <span style=color:#ff79c6>::</span> [<span style=color:#8be9fd>Int</span>] <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>String</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>listPrint</span> <span style=color:#8be9fd>[]</span> <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;Empty list&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#50fa7b>listPrint</span> (x<span style=color:#8be9fd>:</span>xs) <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;...&#34;</span> <span style=color:#6272a4>-- x is the first element, xs is the rest of the list</span></code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-12 class=outline-4>
<h4 id=headline-12>
Declare variables
</h4>
<div id=outline-text-headline-12 class=outline-text-4>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>tripleSecret</span> <span style=color:#ff79c6>::</span> <span style=color:#8be9fd>Int</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>tripleSecret</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>let</span> secret <span style=color:#ff79c6>=</span> mySecretNum
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>                    other <span style=color:#ff79c6>=</span> myOtherNum
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>               <span style=color:#ff79c6>in</span> <span style=color:#bd93f9>3</span> <span style=color:#ff79c6>*</span> secret <span style=color:#ff79c6>+</span> other</code></pre></div>
</div>
<p>or</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>tripleSecret</span> <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>3</span> <span style=color:#ff79c6>*</span> secret <span style=color:#ff79c6>+</span> other
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>               <span style=color:#ff79c6>where</span> secret <span style=color:#ff79c6>=</span> mySecret
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>                      other <span style=color:#ff79c6>=</span> myOther</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-13 class=outline-4>
<h4 id=headline-13>
Tuples
</h4>
<div id=outline-text-headline-13 class=outline-text-4>
<p>Tuple can mix and match different types. An empty tuple is unit type.</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>myTuple</span> <span style=color:#ff79c6>::</span> (<span style=color:#8be9fd>Int</span>, <span style=color:#8be9fd>Int</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>myTuple</span> <span style=color:#ff79c6>=</span> (<span style=color:#bd93f9>7</span>, <span style=color:#bd93f9>42</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#50fa7b>myTriple</span> <span style=color:#ff79c6>::</span> (<span style=color:#8be9fd>Int</span>, <span style=color:#8be9fd>Int</span>, <span style=color:#8be9fd>Int</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#50fa7b>myTriple</span> <span style=color:#ff79c6>=</span> (<span style=color:#bd93f9>7</span>, <span style=color:#bd93f9>42</span>, <span style=color:#bd93f9>108</span>)</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-14 class=outline-4>
<h4 id=headline-14>
List
</h4>
<div id=outline-text-headline-14 class=outline-text-4>
<p>List takes same type, unlike tuple.</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>myList</span> <span style=color:#ff79c6>::</span> [<span style=color:#8be9fd>Int</span>]</code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-15 class=outline-2>
<h2 id=headline-15>
Functional Programming <sup class=footnote-reference><a id=footnote-reference-2 href=#footnote-2>2</a></sup>
</h2>
<div id=outline-text-headline-15 class=outline-text-2>
<div id=outline-container-headline-16 class=outline-3>
<h3 id=headline-16>
Compilation
</h3>
<div id=outline-text-headline-16 class=outline-text-3>
<p>Compile code</p>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>ghc --make [filename.hs]</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-17 class=outline-3>
<h3 id=headline-17>
Keywords
</h3>
<div id=outline-text-headline-17 class=outline-text-3>
<dl>
<dt>
Do
</dt>
<dd>
<p>The <code class=verbatim>do</code> keyword introduces a block of actions that can cause effects in the real world, such as reading or writing a file.</p>
</dd>
<dt>
&lt;-
</dt>
<dd>
<p>Assignment operator inside the do block.</p>
</dd>
</dl>
</div>
</div>
<div id=outline-container-headline-18 class=outline-3>
<h3 id=headline-18>
lines
</h3>
<div id=outline-text-headline-18 class=outline-text-3>
<p>The function, <code class=verbatim>lines</code>, are able to convert a string to a list of strings where each item in the list is a line in the given string. The <code class=verbatim>\n</code> of a line will be discarded. However, when reading a file coming from Windows system, which prefers to put <code class=verbatim>\r\n</code> at the end of each line, using <code class=verbatim>lines</code> to split a string on an unix-based system would be a mess. The <code class=verbatim>\r</code> will be remained in each item of the generated list. <br>
The following code are able to handle the <code class=verbatim>\r</code> and <code class=verbatim>\r\n</code> cases.</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#50fa7b>splitLines</span> <span style=color:#ff79c6>::</span> <span style=color:#8be9fd>String</span> <span style=color:#ff79c6>-&gt;</span> [<span style=color:#8be9fd>String</span>]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#50fa7b>splitLines</span> <span style=color:#8be9fd>[]</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>[]</span> <span style=color:#6272a4>-- do nothing when facing an empty string</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#50fa7b>splitLines</span> cs <span style=color:#ff79c6>=</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#ff79c6>let</span> (pre, suf) <span style=color:#ff79c6>=</span> break isLineTerminator cs <span style=color:#6272a4>-- pre contains substring before newline characters, suf contains everything else</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#ff79c6>in</span> pre <span style=color:#8be9fd>:</span> <span style=color:#ff79c6>case</span> suf <span style=color:#ff79c6>of</span> <span style=color:#6272a4>-- : operator is used to concatenate pre and modified suf</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>(<span style=color:#f1fa8c>&#39;</span><span style=color:#f1fa8c>\r</span><span style=color:#f1fa8c>&#39;</span><span style=color:#8be9fd>:</span><span style=color:#f1fa8c>&#39;</span><span style=color:#f1fa8c>\n</span><span style=color:#f1fa8c>&#39;</span><span style=color:#8be9fd>:</span>rest) <span style=color:#ff79c6>-&gt;</span> splitLines rest <span style=color:#6272a4>-- rest is the remainder of the suf</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>(<span style=color:#f1fa8c>&#39;</span><span style=color:#f1fa8c>\r</span><span style=color:#f1fa8c>&#39;</span><span style=color:#8be9fd>:</span>rest) <span style=color:#ff79c6>-&gt;</span> splitLines rest
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>(<span style=color:#f1fa8c>&#39;</span><span style=color:#f1fa8c>\n</span><span style=color:#f1fa8c>&#39;</span><span style=color:#8be9fd>:</span>rest) <span style=color:#ff79c6>-&gt;</span> splitLines rest
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span style=color:#ff79c6>_</span>           <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>[]</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>  isLineTerminator c <span style=color:#ff79c6>=</span> c <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;</span><span style=color:#f1fa8c>\r</span><span style=color:#f1fa8c>&#39;</span> <span style=color:#ff79c6>||</span> c <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c>&#39;</span><span style=color:#f1fa8c>\n</span><span style=color:#f1fa8c>&#39;</span></code></pre></div>
</div>
<p>When writing the code, organize the important part first. Give functions easy-to-understand name. Define less important function at the end is okay. <br>
The <code class=verbatim>break</code> provided by <code class=verbatim>Prelude</code> can break a list into two parts. <code class=verbatim>break</code> takes two arguments. The first one should be a function returns a boolean value, and the second one is a list. The function will examine each element of the list and decide if split at that element of not. If split, then return <code class=verbatim>True</code>, otherwise <code class=verbatim>False</code>. <code class=verbatim>break</code> is going to return a tuple of two lists. The first lists does not include the item which causes the function argument returning <code class=verbatim>True</code>.</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>break</span> (<span style=color:#50fa7b>\</span>x<span style=color:#ff79c6>-&gt;</span>x) [<span style=color:#8be9fd>False</span>, <span style=color:#8be9fd>False</span>, <span style=color:#8be9fd>True</span>, <span style=color:#8be9fd>True</span>]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#6272a4>-- output: ([False,False],[True,True])</span></code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-19 class=outline-3>
<h3 id=headline-19>
Infix
</h3>
<div id=outline-text-headline-19 class=outline-text-3>
<dl>
<dt>
prefix
</dt>
<dd>
<p>Writing the name of the function before its arguments.</p>
</dd>
<dt>
infix
</dt>
<dd>
<p>When a function has more than 1 arguments, it can be placed in between its first and second arguments.</p>
</dd>
</dl>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>a</span> `times` b <span style=color:#ff79c6>=</span> a <span style=color:#ff79c6>*</span> b</code></pre></div>
</div>
<p><code class=verbatim>infix</code> notation does not change function's behavior. It improves readability.</p>
</div>
</div>
<div id=outline-container-headline-20 class=outline-3>
<h3 id=headline-20>
Data.List
</h3>
<div id=outline-text-headline-20 class=outline-text-3>
<p><code class=verbatim>prelude</code> only exports a partial of functions in Data.List. In order to use all functions of <code class=verbatim>Data.List</code> in <code class=verbatim>ghci</code>, enter the following command</p>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>:module +Data.List</code></pre></div>
</div>
<dl>
<dt>
length
</dt>
<dd>
<p>return the number of elements in a list</p>
</dd>
<dt>
null
</dt>
<dd>
<p>determine whether a list is empty</p>
</dd>
<dt>
head
</dt>
<dd>
<p>access the first element of a list</p>
</dd>
<dt>
tail
</dt>
<dd>
<p>return a list of all but head</p>
</dd>
<dt>
last
</dt>
<dd>
<p>access the last element of a list</p>
</dd>
<dt>
init
</dt>
<dd>
<p>return a list of all but tail</p>
</dd>
</dl>
<p>Why not using <code class=verbatim>length</code> to check emptiness? List in Haskell does not contain its size. Therefore, <code class=verbatim>length</code> has to go through a whole list to find its size. In other words, <code class=verbatim>length</code> runs in liner time. A better alternative, <code class=verbatim>null</code>, not only runs in constant time but also clearly indicates the function of the code containing it.</p>
<dl>
<dt>
partial functions
</dt>
<dd>
<p>return values defined for a subset of valid inputs, like <code class=verbatim>head</code></p>
</dd>
<dt>
total functions
</dt>
<dd>
<p>return valid results over their entire input domain</p>
</dd>
<dt>
++
</dt>
<dd>
<p>append an list to another list</p>
</dd>
<dt>
concat
</dt>
<dd>
<p>concatenate a list of lists into a list; remove one level of nesting</p>
</dd>
<dt>
reverse
</dt>
<dd>
<p>reverse list order</p>
</dd>
<dt>
and
</dt>
<dd>
<p>and each element of a list of bool</p>
</dd>
<dt>
or
</dt>
<dd>
<p>or each element of a list of bool</p>
</dd>
<dt>
all
</dt>
<dd>
<p>takes a predicate, return <code class=verbatim>True</code> if the predicate succeeds on every element of a list</p>
</dd>
<dt>
any
</dt>
<dd>
<p>takes a predicate, return <code class=verbatim>True</code> if the predicate succeeds on at least one element of a list</p>
</dd>
</dl>
<div id=outline-container-headline-21 class=outline-4>
<h4 id=headline-21>
Sublists
</h4>
<div id=outline-text-headline-21 class=outline-text-4>
<dl>
<dt>
take
</dt>
<dd>
<p>return a sublist of first $k$ elements</p>
</dd>
<dt>
drop
</dt>
<dd>
<p>return a sublist of without the first $k$ elements</p>
</dd>
<dt>
split
</dt>
<dd>
<p>split a list at index $k$; return a 2-tuple of list, item at index $k$ belongs to the second element of the tuple</p>
</dd>
<dt>
takeWhile
</dt>
<dd>
<p>take element from the beginning of the list as long as a predicate returns <code class=verbatim>True</code></p>
</dd>
<dt>
dropWhile
</dt>
<dd>
<p>drop element from the beginning of the list as long as a predicate returns <code class=verbatim>True</code></p>
</dd>
<dt>
break
</dt>
<dd>
<p>consume elements when predicate fails</p>
</dd>
<dt>
span
</dt>
<dd>
<p>consume elements when predicate is <code class=verbatim>True</code></p>
</dd>
</dl>
</div>
</div>
<div id=outline-container-headline-22 class=outline-4>
<h4 id=headline-22>
Searching List
</h4>
<div id=outline-text-headline-22 class=outline-text-4>
<dl>
<dt>
elem
</dt>
<dd>
<p>return true if an element is in a list</p>
</dd>
<dt>
notElem
</dt>
<dd>
<p>return true if an element is not in a list</p>
</dd>
<dt>
filter
</dt>
<dd>
<p>return all elements on which predicate succeeds</p>
</dd>
<dt>
isPrefixOf
</dt>
<dd>
<p>return true if a sublist appears in the front of a list</p>
</dd>
<dt>
isInfixOf
</dt>
<dd>
<p>return true if a sublist appears in a list</p>
</dd>
<dt>
isSuffixOf
</dt>
<dd>
<p>return true if a sublist appears in the end of a list</p>
</dd>
</dl>
</div>
</div>
<div id=outline-container-headline-23 class=outline-4>
<h4 id=headline-23>
Multiple List
</h4>
<div id=outline-text-headline-23 class=outline-text-4>
<dl>
<dt>
zip
</dt>
<dd>
<p>combine two lists into a lists of pair, then length of the new list is the minimum length of the 2 given lists</p>
</dd>
<dt>
zipWith
</dt>
<dd>
<p>When zipping, apply a function</p>
</dd>
</dl>
</div>
</div>
<div id=outline-container-headline-24 class=outline-4>
<h4 id=headline-24>
String handling
</h4>
<div id=outline-text-headline-24 class=outline-text-4>
<dl>
<dt>
lines
</dt>
<dd>
<p>partition a string into a list of substring based on <code class=verbatim>\n</code></p>
</dd>
<dt>
unlines
</dt>
<dd>
<p>concatenate a list of strings into a string. <code class=verbatim>\n</code> is used to connect each element</p>
</dd>
<dt>
words
</dt>
<dd>
<p>partition a string into a list of substring based on <code class=verbatim>space</code></p>
</dd>
<dt>
unwords
</dt>
<dd>
<p>concatenate a list of strings into a string. <code class=verbatim>space</code> is used to connect each element</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-25 class=outline-3>
<h3 id=headline-25>
Loops
</h3>
<div id=outline-text-headline-25 class=outline-text-3>
<p>There is not traditional loop in Haskell. Use recursion instead.</p>
<dl>
<dt>
tail recursive function
</dt>
<dd>
<p>function call itself at the end</p>
</dd>
</dl>
<p>Normally, a large amount of times of recursion will lead to stack overflow. However, functional programming languages implement TCO, or tail call optimization, to detect and transform tail recursion to constant space
However, if need to apply function to each element of a list, <code class=verbatim>map</code> is a good function to use</p>
<dl>
<dt>
high order function
</dt>
<dd>
<p>function that takes another function as an argument</p>
</dd>
</dl>
<div id=outline-container-headline-26 class=outline-4>
<h4 id=headline-26>
Fold
</h4>
<div id=outline-text-headline-26 class=outline-text-4>
<dl>
<dt>
foldl
</dt>
<dd>
<p>Fold from left of the list. Take a step function, an initial value for its accumulator, and a list.</p>
</dd>
<dt>
step function
</dt>
<dd>
<p>Take accumulator, an element from list, and return new accumulator; define how to update the accumulator in <code class=verbatim>foldl</code></p>
</dd>
<dt>
foldr
</dt>
<dd>
<p>Fold from right of the list.</p>
</dd>
<dt>
primitive recursive
</dt>
<dd>
<p>class of functions that can be expressed using <code class=verbatim>foldr</code></p>
</dd>
</dl>
<p><code class=verbatim>foldl</code> could cause stack overflow due to the laziness of Haskell. Use <code class=verbatim>foldl'</code> from <code class=verbatim>Data.List</code></p>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-27 class=outline-3>
<h3 id=headline-27>
Lambda Function
</h3>
<div id=outline-text-headline-27 class=outline-text-3>
<ul>
<li>
<p>\ [arguments] -> [function body / definition]</p>
</li>
<li>
<p>use a parentheses to let Haskell know where is the end of the function body</p>
</li>
<li>
<p>can only have one single clause in definition</p>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-28 class=outline-3>
<h3 id=headline-28>
Partial Function and Currying
</h3>
<div id=outline-text-headline-28 class=outline-text-3>
<p>In Haskell, all functions only take one argument. </p>
<dl>
<dt>
partial function
</dt>
<dd>
<p>the function formed by passing fewer arguments to an existing function</p>
</dd>
<dt>
currying
</dt>
<dd>
<p>application of partial function</p>
</dd>
<dt>
section
</dt>
<dd>
<p>enclose an operator in parentheses, supply its left or right argument inside the parentheses to get a partially applied function</p>
</dd>
</dl>
</div>
</div>
<div id=outline-container-headline-29 class=outline-3>
<h3 id=headline-29>
As-pattern
</h3>
<div id=outline-text-headline-29 class=outline-text-3>
<p>xs@(_:xs') is called an as-pattern, and it means “bind the variable xs to the value that matches the right side of the @ symbol. As-pattern allows sharing data. Thus a little bit better runtime than copying data.</p>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-30 class=outline-2>
<h2 id=headline-30>
Type Systems
</h2>
<div id=outline-text-headline-30 class=outline-text-2>
<p>Each program $e$ has a type $t$. Types describe what kind of program $e$ is, i.e. Boolean, Integer, etc. Some programs do not have a type but all programs have at most one type.\\</p>
<div id=outline-container-headline-31 class=outline-3>
<h3 id=headline-31>
Base types
</h3>
<div id=outline-text-headline-31 class=outline-text-3>
<p>The base types used in class are only <code class=verbatim>"bool"</code> for boolean and <code class=verbatim>"int"</code> for integer.</p>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>base-ty = &#34;bool&#34; | &#34;int&#34;</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-32 class=outline-3>
<h3 id=headline-32>
Function types
</h3>
<div id=outline-text-headline-32 class=outline-text-3>
<p>Type for lambda calculus. Denoted as <code class=verbatim>ty -> ty</code>. The first <code class=verbatim>ty</code> is the input type and the second <code class=verbatim>ty</code> is the output type. Note that both input and output can be functions.</p>
<div class="src src-text">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span>ty = base-ty | ty -&gt; ty</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-33 class=outline-3>
<h3 id=headline-33>
Full simple types examples
</h3>
<div id=outline-text-headline-33 class=outline-text-3>
<p><code class=verbatim>true</code> has type <code class=verbatim>bool</code> <br>
<code class=verbatim>42</code> has type <code class=verbatim>int</code> <br>
<code class=verbatim>plusOne = \lambda x. x + 1</code> has type =int -> int</p>
</div>
</div>
<div id=outline-container-headline-34 class=outline-3>
<h3 id=headline-34>
Typing context
</h3>
<div id=outline-text-headline-34 class=outline-text-3>
<p>Type depends on types of free variables in open terms. This kind of types are tracked in a typing context $G$</p>
<dl>
<dt>
binding
</dt>
<dd>
<p>$(x : t)$ means variable $x$ has type $t$</p>
</dd>
</dl>
<p>A typing context is a list of bindings. For example, A two-binding context $G$ is $G = x : bool, y : int$. Empty context is denoted as $G = \cdot$.</p>
</div>
</div>
<div id=outline-container-headline-35 class=outline-3>
<h3 id=headline-35>
Together
</h3>
<div id=outline-text-headline-35 class=outline-text-3>
<p>$G \vdash e : t$ means program $e$ has type $t$ in context $G$.</p>
<dl>
<dt>
Unicity of Typing
</dt>
<dd>
<p>For every typing context $G$ and expression $e$, there exists at most one type $t$ such that $G \vdash e : t$.</p>
</dd>
<dt>
Inversion for Typing
</dt>
<dd>
<p>Suppose that $G \vdash e :t$. If $e = \mathrm{add}(e_1, e_2)$, then $t = int, G \vdash e_1 : int$, and $G \vdash e_2 : int$.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-36 class=outline-2>
<h2 id=headline-36>
Typeclasses <sup class=footnote-reference><a id=footnote-reference-3 href=#footnote-3>3</a></sup>
</h2>
<div id=outline-text-headline-36 class=outline-text-2>
<div id=outline-container-headline-37 class=outline-3>
<h3 id=headline-37>
Define a Typeclass
</h3>
<div id=outline-text-headline-37 class=outline-text-3>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>class</span> <span style=color:#ff79c6>&lt;</span><span style=color:#8be9fd>Typeclass</span> name<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>&lt;</span><span style=color:#ff79c6>instance</span> types<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>where</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>  <span style=color:#ff79c6>&lt;</span>function <span style=color:#ff79c6>type</span> prototype here<span style=color:#ff79c6>&gt;</span></code></pre></div>
</div>
<p>Note that the keyword <code class=verbatim>class</code> here is different from the <code class=verbatim>class</code> in object-oriented languages.</p>
<dl>
<dt>
instance type
</dt>
<dd>
<p>type that implements the functions defined in the typeclass</p>
</dd>
</dl>
<p>For example:</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>class</span> <span style=color:#8be9fd>BasicEq</span> a <span style=color:#ff79c6>where</span> <span style=color:#6272a4>-- the a is chosen arbitrary</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>  isEqual <span style=color:#ff79c6>::</span> a <span style=color:#ff79c6>-&gt;</span> a <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Bool</span> <span style=color:#6272a4>-- defines one funciton</span></code></pre></div>
</div>
<div id=outline-container-headline-38 class=outline-4>
<h4 id=headline-38>
Interpret the type of a typeclass
</h4>
<div id=outline-text-headline-38 class=outline-text-4>
<p>The type of <code class=verbatim>isEqual</code> is</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>isEqual</span> <span style=color:#ff79c6>::</span> <span style=color:#8be9fd>BasicEq</span> a <span style=color:#ff79c6>=&gt;</span> a <span style=color:#ff79c6>-&gt;</span> a <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Bool</span></code></pre></div>
</div>
<p><code class=verbatim>=></code> is a type class constraint. The type of <code class=verbatim>isEqual</code> means if a is an instance of <code class=verbatim>BasicEq</code>, then <code class=verbatim>isEqual</code> takes two <code class=verbatim>a</code> as parameters and return a <code class=verbatim>Bool</code>.</p>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-39 class=outline-3>
<h3 id=headline-39>
Define an instance
</h3>
<div id=outline-text-headline-39 class=outline-text-3>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>instance</span> <span style=color:#ff79c6>&lt;</span><span style=color:#8be9fd>Typeclass</span> name<span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>&lt;</span><span style=color:#ff79c6>instance</span> <span style=color:#ff79c6>type</span><span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>where</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>  <span style=color:#ff79c6>&lt;</span>functions here<span style=color:#ff79c6>&gt;</span></code></pre></div>
</div>
<p>For example</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>instance</span> <span style=color:#8be9fd>BasicEq</span> <span style=color:#8be9fd>Bool</span> <span style=color:#ff79c6>where</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>  isEqual <span style=color:#8be9fd>True</span> <span style=color:#8be9fd>True</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>True</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>  isEqual <span style=color:#8be9fd>False</span> <span style=color:#8be9fd>False</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>True</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>  isEqual <span style=color:#ff79c6>_</span> <span style=color:#ff79c6>_</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>True</span></code></pre></div>
</div>
<p>Now, <code class=verbatim>isEqual</code> works for <code class=verbatim>Bool</code>, but not for any other types since there is no <code class=verbatim>instance</code> created for other types. The compiler does not know how to compare types other than <code class=verbatim>Bool</code></p>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-40 class=outline-2>
<h2 id=headline-40>
Review I
</h2>
<div id=outline-text-headline-40 class=outline-text-2>
<div id=outline-container-headline-41 class=outline-3>
<h3 id=headline-41>
Haskell
</h3>
<div id=outline-text-headline-41 class=outline-text-3>
<div id=outline-container-headline-42 class=outline-4>
<h4 id=headline-42>
Function
</h4>
<div id=outline-text-headline-42 class=outline-text-4>
<ul>
<li>
<p>Multiple arguments, Anonymous Functions (\x -> x + 1)</p>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-43 class=outline-4>
<h4 id=headline-43>
Recursions
</h4>
<div id=outline-text-headline-43 class=outline-text-4>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#50fa7b>f</span> <span style=color:#ff79c6>::</span> [a] <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Int</span> <span style=color:#ff79c6>-&gt;</span> [a]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#50fa7b>f</span> list times <span style=color:#ff79c6>=</span> concat <span style=color:#ff79c6>$</span> map dup list
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>               <span style=color:#ff79c6>where</span> dup <span style=color:#bd93f9>0</span> x <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>[]</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>       dup times x <span style=color:#ff79c6>=</span> x <span style=color:#8be9fd>:</span> dup (times <span style=color:#ff79c6>-</span> <span style=color:#bd93f9>1</span>) x</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-44 class=outline-4>
<h4 id=headline-44>
Higher older function
</h4>
<div id=outline-text-headline-44 class=outline-text-4>
<div id=outline-container-headline-45 class=outline-5>
<h5 id=headline-45>
.
</h5>
<div id=outline-text-headline-45 class=outline-text-5>
<p>(a -> b) -> (b -> c) -> (a -> c)
function composition</p>
</div>
</div>
<div id=outline-container-headline-46 class=outline-5>
<h5 id=headline-46>
$
</h5>
<div id=outline-text-headline-46 class=outline-text-5>
<p>function application</p>
<ul>
<li>
<p>map</p>
</li>
<li>
<p>foldr</p>
</li>
<li>
<p>zip</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-47 class=outline-4>
<h4 id=headline-47>
Curry
</h4>
<div id=outline-text-headline-47 class=outline-text-4>
<p>((a, b) -> c) -> a -> b -> c</p>
</div>
</div>
<div id=outline-container-headline-48 class=outline-4>
<h4 id=headline-48>
Types
</h4>
<div id=outline-text-headline-48 class=outline-text-4>
<p>(newtype, data (most powerful), type (least powerful))</p>
<ul>
<li>
<p><code class=verbatim>type</code> has to use with existed type</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>type</span> <span style=color:#8be9fd>Dollar</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>Int</span></code></pre></div>
</div>
</li>
<li>
<p><code class=verbatim>newtype</code> only has one field</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>newtype</span> <span style=color:#8be9fd>AppendList</span> a  <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>AList</span> ([a] <span style=color:#ff79c6>-&gt;</span> [a])</code></pre></div>
</div>
</li>
<li>
<p><code class=verbatim>data</code> could be anything. Like a tree, node, etc.</p>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#ff79c6>data</span> <span style=color:#8be9fd>Tree</span> <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>Leaf</span> a <span style=color:#ff79c6>|</span> <span style=color:#8be9fd>Node</span> <span style=color:#8be9fd>Left</span> <span style=color:#8be9fd>Mid</span> <span style=color:#8be9fd>Right</span> <span style=color:#ff79c6>|</span> <span style=color:#8be9fd>Child</span> [a] <span style=color:#ff79c6>|</span> <span style=color:#8be9fd>Empty</span></code></pre></div>
</div>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-49 class=outline-4>
<h4 id=headline-49>
Typeclasses / subclasses
</h4>
<div id=outline-text-headline-49 class=outline-text-4>
<div id=outline-container-headline-50 class=outline-5>
<h5 id=headline-50>
Functors
</h5>
<div id=outline-text-headline-50 class=outline-text-5>
<div class="src src-haskell">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd>Functor</span> m
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>  pure <span style=color:#ff79c6>::</span> a <span style=color:#ff79c6>-&gt;</span> m a
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>  pure a <span style=color:#ff79c6>=</span> <span style=color:#8be9fd>Just</span> a
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>  fmap (a <span style=color:#ff79c6>-&gt;</span> b) <span style=color:#ff79c6>-&gt;</span> m a <span style=color:#ff79c6>-&gt;</span> m b
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>  <span style=color:#6272a4>-- &lt;$&gt; is fmap</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>  fmap f m <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>case</span> m <span style=color:#ff79c6>of</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>         <span style=color:#8be9fd>Nothing</span> <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Nothing</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span>  <span style=color:#8be9fd>Just</span> val <span style=color:#ff79c6>-&gt;</span> <span style=color:#8be9fd>Just</span> <span style=color:#ff79c6>$</span> f val</code></pre></div>
</div>
<ul>
<li>
<p>Applicative</p>
</li>
</ul>
<ul>
<li>
<p>Monads</p>
<ul>
<li>
<p>IO Monads</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-51 class=outline-3>
<h3 id=headline-51>
Theory
</h3>
<div id=outline-text-headline-51 class=outline-text-3>
<ul>
<li>
<p>Syntax</p>
<ul>
<li>
<p>digit = 0 | 1 | 2 | 3 …
exp = num + exp | exp</p>
</li>
</ul>
</li>
<li>
<p>Lambdas Calculus (Not-typed)</p>
</li>
<li>
<p>Semantics (small-step)</p>
</li>
<li>
<p>Type theory (add safety = progress(can step) + preservation(step to same type))</p>
</li>
<li>
<p>Bigger Types (P × Q, P + Q)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-52 class=outline-2>
<h2 id=headline-52>
Rust Language
</h2>
<div id=outline-text-headline-52 class=outline-text-2>
<p>[[./TRPL.html][Notes on The Rust Programming Language]</p>
</div>
</div>
<div id=outline-container-headline-53 class=outline-2>
<h2 id=headline-53>
References and Borrowing
</h2>
<div id=outline-text-headline-53 class=outline-text-2>
<ul>
<li>
<p>References is an indirect name for some data. Similar to a pointer to some data.</p>
</li>
<li>
<p>Reference does not own the data.</p>
<ul>
<li>
<p>Can have only one owner, but many references.</p>
</li>
</ul>
</li>
<li>
<p>Reference going out of scope does not drop data.</p>
<ul>
<li>
<p>Can "borrow" reference to function</p>
</li>
</ul>
</li>
<li>
<p>Function can take (mutable) reference and modify caller's data directly</p>
<ul>
<li>
<p>Useful for mutable datastructures.</p>
</li>
</ul>
</li>
<li>
<p>Reference themselves are on stack.</p>
</li>
<li>
<p>By default, references are immutable.</p>
<ul>
<li>
<p>Can't change underlying data through references.</p>
</li>
<li>
<p>Reference type: <code class=verbatim>&T</code></p>
</li>
</ul>
</li>
<li>
<p>Can declare mutable references</p>
<ul>
<li>
<p>Target must be mutable as well</p>
</li>
<li>
<p>Reference type: <code class=verbatim>&mut T</code></p>
</li>
</ul>
<div class="src src-rust">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>let</span> must my_str <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>String</span>::from(<span style=color:#f1fa8c>&#34;foo&#34;</span>); <span style=color:#6272a4>// mutable var
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>let</span> ref_to_str <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> my_str; <span style=color:#6272a4>// mutable ref to my_str
</span></code></pre></div>
</div>
</li>
</ul>
<div id=outline-container-headline-54 class=outline-3>
<h3 id=headline-54>
Dereferencing
</h3>
<div id=outline-text-headline-54 class=outline-text-3>
<ul>
<li>
<p>Use <code class=verbatim>*</code> notation to get thing reference is pointing at</p>
</li>
<li>
<p>Often not needed due to "auto-deref" (magic)</p>
<div class="src src-rust">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>let</span> vr: <span style=color:#ff79c6>&amp;</span><span style=color:#8be9fd;font-style:italic>Vec</span><span style=color:#ff79c6>&lt;</span><span style=color:#8be9fd>i32</span><span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>..</span>.;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>println!(<span style=color:#f1fa8c>&#34;First element: {}&#34;</span>, (<span style=color:#ff79c6>*</span>vr)[<span style=color:#bd93f9>0</span>]); <span style=color:#6272a4>// Explicit deref
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#6272a4></span>println!(<span style=color:#f1fa8c>&#34;First element: {}&#34;</span>, vr[<span style=color:#bd93f9>0</span>]);    <span style=color:#6272a4>// Implicit deref
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#6272a4></span>println!(<span style=color:#f1fa8c>&#34;First element: {}&#34;</span>, vr.first); <span style=color:#6272a4>// Implicit deref
</span></code></pre></div>
</div>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-55 class=outline-3>
<h3 id=headline-55>
Somewhat confusingly
</h3>
<div id=outline-text-headline-55 class=outline-text-3>
<p>Reference itself can be mutable</p>
<div class="src src-rust">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#6272a4>// Can&#39;t change ref or thing it&#39;s pointing at
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>let</span> immut_ref_to_immut <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span>my_string;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#6272a4>// Can&#39;t change ref, can change thing it&#39;s pointing at
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>let</span> immut_ref_to_mut <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> my_string;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#6272a4>// Can change ref, can&#39;t change thing it&#39;s pointing at
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> mut_ref_to_immut <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span>my_string;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>mut_ref_to_immut <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span>my_other_string;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#6272a4>// Can change ref and thing it&#39;s poing at
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> mut_ref_to_mut <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> my_string;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>mut_ref_to_mut <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> my_other_string;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#ff79c6>*</span>mut_ref_to_mut <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>String</span>::from(<span style=color:#f1fa8c>&#34;???&#34;</span>);</code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-56 class=outline-3>
<h3 id=headline-56>
What's going one
</h3>
<div id=outline-text-headline-56 class=outline-text-3>
<ul>
<li>
<p>Mutability is not a property of the data!</p>
<ul>
<li>
<p>Not: these bits are mutable or immutable</p>
</li>
</ul>
</li>
<li>
<p>Mutability is property of variable or reference</p>
<ul>
<li>
<p>YES: I can mutate data through this variable</p>
</li>
<li>
<p>YES: I cannot mutate data through that reference</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-57 class=outline-3>
<h3 id=headline-57>
Multiple References
</h3>
<div id=outline-text-headline-57 class=outline-text-3>
<ul>
<li>
<p>Rust works hard to ensure one owner for each data</p>
</li>
<li>
<p>Multiple references to same data is problematic</p>
<ul>
<li>
<p>Also known as aliasing</p>
</li>
</ul>
</li>
<li>
<p>References need to follow certain rules for safty</p>
</li>
<li>
<p>In any scope, there can be either:</p>
<ol>
<li>
<p>Any number of immutable references referring to the same variable</p>
</li>
<li>
<p>At most one mutable reference referring to the same variable</p>
</li>
</ol>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-58 class=outline-3>
<h3 id=headline-58>
Multiple Immutable
</h3>
<div id=outline-text-headline-58 class=outline-text-3>
<ul>
<li>
<p>Can have any number of immutable references to variable</p>
</li>
<li>
<p>Safe: none of the references can change the underlying</p>
<div class="src src-rust">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>let</span> my_str <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>String</span>::from(<span style=color:#f1fa8c>&#34;foo&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#8be9fd;font-style:italic>let</span> ref_one <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span>my_str;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#8be9fd;font-style:italic>let</span> ref_two <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span>my_str;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span>println!(<span style=color:#f1fa8c>&#34;Both refs: {} {}&#34;</span>, ref_one, ref_two); <span style=color:#6272a4>// OK
</span></code></pre></div>
</div>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-59 class=outline-3>
<h3 id=headline-59>
At Most One Mutable
</h3>
<div id=outline-text-headline-59 class=outline-text-3>
<ul>
<li>
<p>Can only change underlying through single reference</p>
<ul>
<li>
<p>Also important in concurrent setting</p>
</li>
<li>
<p>Also enables more optimizations</p>
</li>
</ul>
<div class="src src-rust">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> mut_str <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>String</span>::from(<span style=color:#f1fa8c>&#34;foo&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#8be9fd;font-style:italic>let</span> ref_one <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> mut_str; <span style=color:#6272a4>// OK
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>let</span> ref_two <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> mut_str; <span style=color:#6272a4>// Not OK
</span></code></pre></div>
</div>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-60 class=outline-3>
<h3 id=headline-60>
Use Scopes to Manage References
</h3>
<div id=outline-text-headline-60 class=outline-text-3>
<p>Rules only apply to references currently in scope.</p>
<div class="src src-rust">
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> mut_str <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>String</span>::from(<span style=color:#f1fa8c>&#34;foo&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#8be9fd;font-style:italic>let</span> mut_ref <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> mut_str;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>mut_ref.push(<span style=color:#f1fa8c>&#34;bar&#34;</span>); <span style=color:#6272a4>// OK
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#6272a4></span>mut_str.push(<span style=color:#f1fa8c>&#34;baz&#34;</span>); <span style=color:#6272a4>// Not OK
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#6272a4></span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#6272a4>// Use scopes!
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#6272a4></span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#ff79c6>mut</span> mut_str <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>String</span>::from(<span style=color:#f1fa8c>&#34;foo&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>{
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#8be9fd;font-style:italic>let</span> mut_ref <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>&amp;</span><span style=color:#ff79c6>mut</span> mut_str;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    mut_ref.push(<span style=color:#f1fa8c>&#34;bar&#34;</span>); <span style=color:#6272a4>// OK
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span style=color:#6272a4></span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>mut_str.push(<span style=color:#f1fa8c>&#34;baz&#34;</span>); <span style=color:#6272a4>// OK
</span></code></pre></div>
</div>
</div>
</div>
<div id=outline-container-headline-61 class=outline-3>
<h3 id=headline-61>
Alternative Reading
</h3>
<div id=outline-text-headline-61 class=outline-text-3>
<ul>
<li>
<p>Immutable reference shared reference</p>
<ul>
<li>
<p>Shared access to some data</p>
</li>
<li>
<p>Sharing: can't change the data</p>
</li>
</ul>
</li>
<li>
<p>Mutable reference: unique reference</p>
<ul>
<li>
<p>Exclusive access to some data</p>
</li>
<li>
<p>Can modify it: no one else has access</p>
</li>
</ul>
</li>
<li>
<p>Can't mix shared and unique!</p>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-62 class=outline-3>
<h3 id=headline-62>
Isn't a Reference Just a Pointer?
</h3>
<div id=outline-text-headline-62 class=outline-text-3>
<ul>
<li>
<p>In machine code: a reference is just a pointer</p>
</li>
<li>
<p>In Rust: a reference also gives <strong>permissions</strong> to do things</p>
</li>
<li>
<p>With an immutable reference, code can</p>
<ul>
<li>
<p>Dereference/read location</p>
</li>
<li>
<p>Point to/read <strong>anything reachable</strong> from reference.</p>
</li>
</ul>
</li>
<li>
<p>With an mutable reference, code can</p>
<ul>
<li>
<p>Dereference/read/write location</p>
</li>
<li>
<p>Point to/read/write <strong>anything reachable</strong> from reference.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-63 class=outline-3>
<h3 id=headline-63>
Passing Arguments
</h3>
<div id=outline-text-headline-63 class=outline-text-3>
<div id=outline-container-headline-64 class=outline-4>
<h4 id=headline-64>
"Moving" Arguments
</h4>
<div id=outline-text-headline-64 class=outline-text-4>
<ul>
<li>
<p>Operationally: arguments passed "by value"</p>
</li>
<li>
<p>Ownership of argument passes into the function</p>
<ul>
<li>
<p>Caller can't use arguments after calling!</p>
</li>
<li>
<p>Arguments moved into function</p>
</li>
</ul>
</li>
<li>
<p>Function can return argument to return ownership</p>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-65 class=outline-4>
<h4 id=headline-65>
"Borrowing" Arguments
</h4>
<div id=outline-text-headline-65 class=outline-text-4>
<ul>
<li>
<p>Operationally: arguments passed "by reference"</p>
</li>
<li>
<p>Ownership of argument doesn't change</p>
<ul>
<li>
<p>Original owner (caller, caller-of-caller, …) owns argument.</p>
</li>
</ul>
</li>
<li>
<p>Function borrows arguments from the owner</p>
<ul>
<li>
<p>Will give it back to owner when done with it</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id=outline-container-headline-66 class=outline-3>
<h3 id=headline-66>
Variables Are Key
</h3>
<div id=outline-text-headline-66 class=outline-text-3>
<ul>
<li>
<p>Anywhere there are variables:</p>
<ul>
<li>
<p>Think about ownership rules</p>
</li>
<li>
<p>Think about borrowing rules</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-67 class=outline-3>
<h3 id=headline-67>
Matching Can Move Data
</h3>
<div id=outline-text-headline-67 class=outline-text-3>
<ul>
<li>
<p>Often: matching on Enums with data inside</p>
</li>
<li>
<p>The inner data is moved into the match arm</p>
<ul>
<li>
<p>Variable from match arm has ownership</p>
</li>
</ul>
</li>
<li>
<p>Typical ownership rules apply</p>
<ul>
<li>
<p>Data is dropped at the end of the arm</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id=outline-container-headline-68 class=outline-3>
<h3 id=headline-68>
Matching on a reference
</h3>
<div id=outline-text-headline-68 class=outline-text-3>
<ul>
<li>
<p>Rust will infer how to borrow inner values</p>
<ul>
<li>
<p>Matching on <code class=verbatim>&T</code> type: arms borrow immutable</p>
</li>
<li>
<p>Marching on <code class=verbatim>&must T</code> type: arms borrow mutable</p>
</li>
</ul>
</li>
<li>
<p>Also called "default binding modes"</p>
<ul>
<li>
<p>Usually: Just work</p>
</li>
<li>
<p>Sometimes; inferences goes wrong (doesn't work)</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class=footnotes>
<hr class=footnotes-separatator>
<div class=footnote-definitions>
<div class=footnote-definition>
<sup id=footnote-1><a href=#footnote-reference-1>1</a></sup>
<div class=footnote-body>
<p>The whole note is based on and is coming from the course materials of <a href=https://pages.cs.wisc.edu/~justhsu/teaching/current/cs538/>COMP SCI 538</a> by Professor Justin Hsu.</p>
</div>
</div>
<div class=footnote-definition>
<sup id=footnote-2><a href=#footnote-reference-2>2</a></sup>
<div class=footnote-body>
<p>Notes from Real World Haskell by Bryan O'Sullivan, Don Stewart, and John Goerze</p>
</div>
</div>
<div class=footnote-definition>
<sup id=footnote-3><a href=#footnote-reference-3>3</a></sup>
<div class=footnote-body>
<p>Notes from Real World Haskell by Bryan O'Sullivan, Don Stewart, and John Goerze</p>
<dl>
<dt>
Typeclasses
</dt>
<dd>
<p>Typeclasses define a set of functions that can have different implementations depending on the type of data they are given.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</article>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
<li><a href=https://archive.casouri.cat>BHL0388</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#headline-1>Lecture 1 <sup class=footnote-reference>1</sup></a>
<ul>
<li><a href=#headline-2>Functional programming</a>
<ul>
<li><a href=#headline-3>History</a>
</li>
<li><a href=#headline-4>Building block</a>
</li>
<li><a href=#headline-5>Control side-effects</a>
</li>
</ul>
</li>
<li><a href=#headline-6>A taste of Haskell</a>
<ul>
<li><a href=#headline-7>Declaring function</a>
</li>
<li><a href=#headline-8>Calling function</a>
</li>
<li><a href=#headline-9>Multiple arguments</a>
</li>
<li><a href=#headline-10>Case analysis</a>
</li>
<li><a href=#headline-11>Case expression</a>
</li>
<li><a href=#headline-12>Declare variables</a>
</li>
<li><a href=#headline-13>Tuples</a>
</li>
<li><a href=#headline-14>List</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href=#headline-15>Functional Programming <sup class=footnote-reference>2</sup></a>
<ul>
<li><a href=#headline-16>Compilation</a>
</li>
<li><a href=#headline-17>Keywords</a>
</li>
<li><a href=#headline-18>lines</a>
</li>
<li><a href=#headline-19>Infix</a>
</li>
<li><a href=#headline-20>Data.List</a>
<ul>
<li><a href=#headline-21>Sublists</a>
</li>
<li><a href=#headline-22>Searching List</a>
</li>
<li><a href=#headline-23>Multiple List</a>
</li>
<li><a href=#headline-24>String handling</a>
</li>
</ul>
</li>
<li><a href=#headline-25>Loops</a>
<ul>
<li><a href=#headline-26>Fold</a>
</li>
</ul>
</li>
<li><a href=#headline-27>Lambda Function</a>
</li>
<li><a href=#headline-28>Partial Function and Currying</a>
</li>
<li><a href=#headline-29>As-pattern</a>
</li>
</ul>
</li>
<li><a href=#headline-30>Type Systems</a>
<ul>
<li><a href=#headline-31>Base types</a>
</li>
<li><a href=#headline-32>Function types</a>
</li>
<li><a href=#headline-33>Full simple types examples</a>
</li>
<li><a href=#headline-34>Typing context</a>
</li>
<li><a href=#headline-35>Together</a>
</li>
</ul>
</li>
<li><a href=#headline-36>Typeclasses <sup class=footnote-reference>3</sup></a>
<ul>
<li><a href=#headline-37>Define a Typeclass</a>
<ul>
<li><a href=#headline-38>Interpret the type of a typeclass</a>
</li>
</ul>
</li>
<li><a href=#headline-39>Define an instance</a>
</li>
</ul>
</li>
<li><a href=#headline-40>Review I</a>
<ul>
<li><a href=#headline-41>Haskell</a>
<ul>
<li><a href=#headline-42>Function</a>
</li>
<li><a href=#headline-43>Recursions</a>
</li>
<li><a href=#headline-44>Higher older function</a>
<ul>
<li><a href=#headline-45>.</a>
</li>
<li><a href=#headline-46>$</a>
</li>
</ul>
</li>
<li><a href=#headline-47>Curry</a>
</li>
<li><a href=#headline-48>Types</a>
</li>
<li><a href=#headline-49>Typeclasses / subclasses</a>
<ul>
<li><a href=#headline-50>Functors</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href=#headline-51>Theory</a>
</li>
</ul>
</li>
<li><a href=#headline-52>Rust Language</a>
</li>
<li><a href=#headline-53>References and Borrowing</a>
<ul>
<li><a href=#headline-54>Dereferencing</a>
</li>
<li><a href=#headline-55>Somewhat confusingly</a>
</li>
<li><a href=#headline-56>What's going one</a>
</li>
<li><a href=#headline-57>Multiple References</a>
</li>
<li><a href=#headline-58>Multiple Immutable</a>
</li>
<li><a href=#headline-59>At Most One Mutable</a>
</li>
<li><a href=#headline-60>Use Scopes to Manage References</a>
</li>
<li><a href=#headline-61>Alternative Reading</a>
</li>
<li><a href=#headline-62>Isn't a Reference Just a Pointer?</a>
</li>
<li><a href=#headline-63>Passing Arguments</a>
<ul>
<li><a href=#headline-64>"Moving" Arguments</a>
</li>
<li><a href=#headline-65>"Borrowing" Arguments</a>
</li>
</ul>
</li>
<li><a href=#headline-66>Variables Are Key</a>
</li>
<li><a href=#headline-67>Matching Can Move Data</a>
</li>
<li><a href=#headline-68>Matching on a reference</a>
</li>
</ul>
</li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&text=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&title=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&is_video=false&description=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Theory%20and%20Design%20of%20Programming%20Languages&body=Check out this article: https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&title=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&title=Theory%20and%20Design%20of%20Programming%20Languages" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&name=Theory%20and%20Design%20of%20Programming%20Languages&description=Lecture%201%201%20%20Functional%20programming%20%20History%20%20%20%20Based%20on%20%24%5clambda%24%20calculus%0a%20%20Lisp%0a%20%20ML%0a%20%20Haskell%0a%20%20%20%20Building%20block%20%20%20%20function%20%20%20take%20inputs%20as%20arguments%20and%20produce%20outputs.%0a%20%20Functions%20are%20first%20class%2c%20like%20any%20other%20value.%20They%20can%20be%20passed%20to%2c%20returned%20by%20functions.%20Functions%20can%20also%20be%20combined%20into%20new%20function." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.mrr1vfe.io%2fposts%2fcs538%2f&t=Theory%20and%20Design%20of%20Programming%20Languages" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2021 Yi Chen
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/about>About</a></li>
<li><a href=https://archive.casouri.cat>BHL0388</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}}</script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
</html>